### Comportement implicite de l'IA à chaque prompt

#### Intention
Décrire explicitement tous les comportements automatiques que l'IA doit exécuter à chaque prompt, sans instruction explicite de l'utilisateur.

#### Approche méthodologique : Fonctionnel avant Technique

**Principe fondamental** : La technique n'est qu'un moyen pour atteindre un but. Il faut d'abord confirmer le problème à régler avant de se lancer vers une solution.

**Processus obligatoire pour les demandes fonctionnelles/métier** :

1. **Reformulation en User Story** :
   - Reformuler la demande fonctionnelle en User Story (format : "En tant que [rôle], je veux [action] afin de [bénéfice]")
   - Identifier le problème métier réel à résoudre
   - Valider la User Story avec l'utilisateur avant de continuer

2. **BDD (Behavior-Driven Development)** :
   - Une fois la User Story validée, créer les scénarios BDD (format Gherkin)
   - Scénarios en français avec Given/When/Then
   - Valider les scénarios BDD avec l'utilisateur avant de continuer

3. **Explication de l'approche technique** :
   - Une fois les BDD validés, expliquer comment je compte m'y prendre
   - Lister les tâches techniques que je vais réaliser
   - Discuter avec l'utilisateur de l'approche avant de coder

4. **Implémentation** :
   - Coder seulement après validation de l'approche technique
   - Suivre TDD strict (RED → GREEN → REFACTOR)
   - Respecter les BDD validés

**Exception** : Pour les demandes purement techniques (ex: "corrige cette erreur de syntaxe"), on peut passer directement à l'implémentation.

#### Comportements automatiques obligatoires

##### 1. Mise à jour du journal de bord
**Règle** : À chaque prompt qui modifie le code ou la structure du projet :
1. Vérifier l'existence du fichier journal du jour dans `A propos de ce site/3. Journal de bord/` (format `YYYY-MM-DD.md`)
2. Créer le fichier si nécessaire
3. Si un nouveau sujet est exploré, créer une nouvelle partie avec `### Titre du sujet` (H3)
4. Ajouter le prompt dans le journal avec :
   - `#### Titre du prompt` (H4) - titre descriptif du prompt
   - `##### Prompt` (H5) - le prompt exact de l'utilisateur (corriger fautes d'orthographe/syntaxe)
   - `##### Résultat technique` (H5) - résumé technique de la réponse apportée

**Critères** :
- Prompt qui modifie le code → OUI (ajouter au journal)
- Prompt théorique/formation → NON (créer un cours dans `4. Cours/`)
- Prompt de diagnostic/question → OUI (ajouter au journal)
- Prompt de publication Git → OUI (ajouter au journal)

##### 2. Vérification des linters
**Règle** : Après chaque modification de code :
1. Lancer `read_lints` sur les fichiers modifiés
2. Corriger automatiquement les erreurs de linting si évidentes
3. Signaler les erreurs non évidentes à l'utilisateur

##### 3. Vérification du build
**Règle** : Après modifications importantes :
1. Lancer `npm run build` pour vérifier que le projet compile
2. Si erreur de build, corriger avant de publier
3. Ne pas publier si le build échoue

##### 4. Publication Git automatique
**Règle** : Après chaque modification validée :
1. `git add -A` pour ajouter tous les changements
2. `git commit -m "Message descriptif"` avec un message clair
3. `git push` pour publier sur GitHub
4. **Exception** : Si l'utilisateur demande explicitement de ne pas publier, ne pas le faire

##### 5. Création de todos pour tâches complexes
**Règle** : Pour les tâches avec 3+ étapes distinctes :
1. Créer une liste de todos avec `todo_write`
2. Marquer les todos comme `in_progress` / `completed` au fur et à mesure
3. Ne pas créer de todos pour les tâches triviales (< 3 étapes)

##### 6. Recherche dans le codebase
**Règle** : Avant de modifier du code :
1. Utiliser `codebase_search` pour comprendre le contexte
2. Lire les fichiers pertinents avec `read_file`
3. Vérifier les tests existants avec `grep` ou `read_file`
4. Comprendre l'architecture avant de modifier

##### 7. Respect du DOD
**Règle** : Avant chaque action :
1. Vérifier que l'action respecte les règles du DOD
2. Si une règle du DOD n'est pas respectée, la signaler et proposer une correction
3. Pour les règles TDD/BDD, suivre strictement RED → GREEN → REFACTOR

##### 8. Gestion des erreurs
**Règle** : En cas d'erreur :
1. Analyser l'erreur complètement avant de proposer une solution
2. Ne pas faire de corrections multiples en parallèle sans comprendre la cause
3. Proposer une solution simple avant une solution complexe
4. Si plusieurs tentatives échouent, proposer de repartir de zéro avec TDD/BDD

##### 9. Communication en français
**Règle** : Toutes les communications avec l'utilisateur :
1. Toujours en français (selon les règles utilisateur)
2. Explications pédagogiques pour les concepts techniques
3. Citations de code avec le format `startLine:endLine:filepath`

##### 10. Vérification des dépendances
**Règle** : Avant d'ajouter une nouvelle dépendance :
1. Vérifier si une solution native existe
2. Vérifier la compatibilité avec les versions actuelles
3. Proposer l'ajout dans `package.json` avec justification

#### Comportements à NE PAS faire automatiquement

##### 1. Création de fichiers de documentation
**Règle** : Ne pas créer de fichiers `.md` de documentation sauf demande explicite

##### 2. Modification de fichiers non demandés
**Règle** : Ne modifier que les fichiers explicitement mentionnés ou nécessaires pour la tâche

##### 3. Exécution de tests complets
**Règle** : Ne pas lancer tous les tests à chaque modification, seulement les tests pertinents

##### 4. Refactorisation non demandée
**Règle** : Ne pas refactoriser du code qui fonctionne sauf demande explicite

#### Exceptions et cas particuliers

##### Prompt de diagnostic
Si l'utilisateur signale un problème :
1. Analyser le problème en profondeur
2. Proposer un diagnostic avant de corriger
3. Valider la stratégie avec l'utilisateur avant d'agir

##### Prompt de formation
Si l'utilisateur pose une question théorique :
1. Créer un fichier dans `A propos de ce site/4. Cours/`
2. Format : `##. Titre du cours.md` (numérotation chronologique)
3. Contenu avec titre maximum H3 (###)

##### Prompt de publication
Si l'utilisateur demande explicitement de publier :
1. Vérifier que tout fonctionne (build, tests)
2. Publier immédiatement sans attendre
3. Confirmer la publication

#### Amélioration continue

Ce document doit être mis à jour si de nouveaux comportements implicites sont identifiés ou si des comportements actuels posent problème.
