# Fonctionnement du Site Vitrine

*Comment utiliser — Manuel du rédacteur*

---

## 2.1 Identité du Site

- **Nom** : Web Malain et Possible
- **Type** : Site vitrine professionnel / Portfolio multi-profils
- **Profils** : CPO, COO, Coach Agile, CTO
- **Propriétaire** : Alain Meunier

---

## 2.2 Système CMS basé sur JSON

Tout le contenu du site est défini dans des fichiers JSON situés dans `data/` :

| Fichier | Rôle |
|---------|------|
| `index.json` | Page d'accueil |
| `mes-profils.json` | Liste des profils |
| `profil-*.json` | Détail de chaque profil |
| `_site-identity.json` | Identité SEO (Person, WebSite pour JSON-LD) |
| `_Pages-Et-Lien.json` | Plan du site et liens |
| `_footerButtons.json` | Boutons du footer |
| `_temoignages.json` | Témoignages |
| `_bibliotheque.json` | Ressources documentaires |

---

## 2.3 Types de Contenu (Liste Complète)

Chaque élément dans les JSON a un type qui détermine son rendu. Voici la **liste exhaustive** :

| Type | Classe CSS | Description |
|------|------------|-------------|
| `hero` | `.hero` | Bandeau d'accueil (titre, sous-titre, description, CTA, vidéo) |
| `titre` | `.titre` | Titre de section (bande bleue) |
| `titreDePage` | `.titreDePage` | Titre de la page (affiché dans le header) |
| `texteLarge` | `.texteLarge` | Bloc de texte avec paragraphes |
| `video` | `.video` | Incrustation YouTube |
| `domaineDeCompetence` | `.domaineDeCompetence` | Bloc domaine (titre, contenu, compétences, expériences) |
| `competence` | `.competence` | Carte compétence (titre, description, auteur, bouton, image) |
| `experienceEtApprentissage` | `.experienceEtApprentissage` | Ligne d'expérience (catégorie, description, période) |
| `callToAction` | `.callToAction` | Bouton d'action principal |
| `groupeDeBoutons` | `.groupeBoutons` | Groupe de boutons (icônes, liens) |
| `listeDesPages` | `.listeDesPages` | Plan du site (liens par zone) |
| `blocsProfils` | `.blocsProfils` | Grille de profils professionnels |
| `profil` | `.profil` | Carte profil (titre, job titles, CV, lien) |
| `temoignages` | `.temoignages` | Liste de témoignages |
| `temoignage` | `.temoignage` | Carte témoignage (photo, nom, fonction, texte) |
| `listeDeDetournementsVideo` | `.videoDetournement` | Liste de détournements vidéo |
| `detournementVideo` | `.detournementVideo` | Carte détournement (titre, pitch, date, vidéos) |

**Règle** : Le type doit être implémenté dans le code. Sinon, le build échoue avec un message explicite.

---

## 2.4 Types Hiérarchiques (Liste Complète)

Les types hiérarchiques définissent la typographie et le style des éléments texte.

| Type | Token CSS | Taille | Couleur | Style |
|------|-----------|--------|---------|-------|
| `h1` | `--h1-*` | `--enorme` (2rem) | Noir (ou blanc dans header) | Gras, centré |
| `h2` | `--h2-*` | `--grande` (1.5rem) | Noir | Gras, centré |
| `h3` | `--h3-*` | `--normale` (1rem) | Bleu (`--CouleurFoncé`) | Gras, centré |
| `p` | `--p-*` | `--normale` (1rem) | Noir | Normal, gauche |
| `a` (auteur) | `--a-*` | `--normale` | Noir | Italique |
| `l1` (liste) | `--l1-*` | `--normale` | Noir | Normal |
| `lk` (lien) | `--lk-*` | `--normale` | Bleu | Semi-gras, souligné |
| `b` (bouton) | `--b-*` | `--normale` | Blanc sur bleu | Semi-gras |
| `h4` | `--h4-*` | `--petite` (0.8rem) | Noir | Gras, gauche |
| `n` (note) | `--n-*` | `--petite` | Noir | Normal |
| `l2` (sous-liste) | `--l2-*` | `--petite` | Noir | Normal |

### Tailles de Police (Tokens)

| Token | Valeur | Usage |
|-------|--------|-------|
| `--enorme` | 2rem | h1 |
| `--grande` | 1.5rem | h2 |
| `--moyenne` | 1.25rem | (réservé) |
| `--normale` | 1rem | h3, p, listes, liens |
| `--petite` | 0.8rem | h4, notes, sous-listes |

### Propriétés JSON avec Markdown

Certaines propriétés des JSON contiennent du texte Markdown qui est parsé et rendu en HTML :

| Type de contenu | Propriété | Markdown supporté | Type hiérarchique |
|-----------------|-----------|-------------------|-------------------|
| `hero` | `description` | `**gras**`, `\n` | `p` |
| `texteLarge` | `texte` | `**gras**`, `\n\n` | `p` |
| `competence` | `description` | `**gras**`, `[lien](url)` | `p` |
| `domaineDeCompetence` | `contenu` | `**gras**`, `\n` | `p` |
| `temoignage` | `temoignage` | `\n\n` | `p` |
| `experienceEtApprentissage` | `description` | `**gras**` | `n` |

**Syntaxe Markdown supportée** :
- `**texte**` → `<strong>texte</strong>` (gras)
- `*texte*` → `<em>texte</em>` (italique)
- `[texte](url)` → `<a href="url">texte</a>` (lien)
- `\n` → `<br />` (saut de ligne)
- `\n\n` → nouveau `<p>` (paragraphe)

---

## 2.5 Noms Canoniques

**Règle fondamentale** : Un seul nom par type de contenu, **identique sur toutes les couches** :

| Couche | Exemple |
|--------|---------|
| JSON | `"type": "hero"` |
| TypeScript | `type: 'hero'` |
| CSS | `.hero { ... }` |

### Convention de Nommage

- **camelCase** : un seul mot quand c'est possible (`hero`, `titre`, `video`), sinon plusieurs mots en camelCase (`domaineDeCompetence`, `listeDesPages`, `texteLarge`)
- **Préfixe `ui-`** : Pour les éléments de structure (layout, wrapper) non définis dans les JSON
- **Containers implicites** : Chaque propriété a un container `[nomCanonique].cont`

### Layouts (data-layout)

Les conteneurs de listes exposent un attribut **data-layout** :

| Conteneur | data-layout | Rôle |
|-----------|-------------|------|
| blocsProfils | `4 columns x 1 row` | Grille 4 colonnes |
| temoignages | `2 columns x N rows` | Grille 2 colonnes |
| competences | `3 columns x 1 row` | Grille 3 compétences |
| experiencesEtApprentissages | `accordeon, X rows` | Accordéon |
| listeDeDetournementsVideo | `X rows` | Liste verticale |
| listeDesPages | `draw with page properties` | Rendu dynamique |
| droits d'auteur | `tooltip, droits d'auteur` | Popup/tooltip |

---

## 2.6 Hiérarchie du Contenu

### Pour les Pages du Site

Structure implicite des pages générées :

- **Page** = Composant React
- **Sections** = Blocs de contenu (hero, texte, callToAction...)
- **Éléments** = Composants individuels

### Pour le Contenu Markdown ("A propos du site", Journaux, Cours)

Hiérarchie unifiée :

| Niveau | Markdown | Représentation |
|--------|----------|----------------|
| H1 | `#` | Chapitre (dossier) |
| H2 | `##` | Section (fichier MD) |
| H3 | `###` | Partie (dans le fichier) |
| H4 | `####` | Sous-partie |
| H5 | `#####` | Bloc |

**Spécificités via attributs** : `typeDeContenu`, `estPrompt`, `estResultatTechnique`

---

## 2.7 Parsing Markdown Unifié

**Un seul parser** (`parseMarkdownContent()`) pour tous les types de fichiers MD :
- Journaux de bord
- "A propos de ce site"
- Cours
- Documentation

L'approche permet une cohérence de rendu sur tout le site.

---

## 2.8 Mode Lecture

Composant `ModeLectureRenderer` affichant la hiérarchie du contenu avec types sémantiques visibles (H1→H5, containers, répétiteurs). Utile pour comprendre la structure réelle des données.

---

## 2.9 Metadata SEO

### Metadata Pages
Les metadata SEO sont définies dans les JSON de contenu, pas dans les pages. Le helper `metadataBuilder.ts` génère les metadata Next.js.

### JSON-LD
Les données structurées (Schema.org) sont lues depuis `data/_site-identity.json` :
- `Person` : Identité du propriétaire
- `WebSite` : Description du site
- `BreadcrumbList` : Fil d'Ariane (généré dynamiquement)

---

*Dernière mise à jour : 2 février 2026*
