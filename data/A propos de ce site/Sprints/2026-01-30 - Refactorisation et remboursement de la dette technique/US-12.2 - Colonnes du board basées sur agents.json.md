# US-12.2 : Colonnes du board basées sur agents.json

- **En tant que** visiteur ou membre du projet qui consulte le tableau de bord « A propos de ce site » (board KanBan du sprint)
- **Je souhaite** que la liste des colonnes (agents) du board soit construite à partir d’un fichier `agents.json` dans les données du site, et qu’en environnement de développement ce fichier soit créé ou mis à jour à partir des noms des fichiers du dossier `.cursor/agents`
- **Afin de** garantir le même affichage des colonnes en local et sur Vercel (où le dossier `.cursor/agents` n’est pas nécessairement synchronisé)

- **Critères d'acceptation** :

- **CA1 - Source des colonnes** :
  - La liste des colonnes « agents » du board KanBan est **toujours** construite à partir du fichier `data/A propos de ce site/agents.json` (et non plus à partir de la lecture directe du dossier `.cursor/agents`).
  - Si `agents.json` est absent ou invalide, le board affiche uniquement les colonnes « A faire » et « Fait » (aucune colonne agent), ou un comportement de repli explicite et documenté.

- **CA2 - Format agents.json** :
  - Le fichier `agents.json` contient une liste d’entrées (tableau) décrivant les agents, dans l’ordre d’affichage des colonnes.
  - Chaque entrée expose au minimum un identifiant et un libellé (ex. `id`, `label`) cohérents avec l’usage actuel du board (ordre du workflow).

- **CA3 - Synchronisation en dev** :
  - En environnement de développement, un mécanisme (script ou étape de build/dev) crée ou met à jour `data/A propos de ce site/agents.json` à partir des noms des fichiers du dossier `.cursor/agents` (fichiers `.md`, ordre dérivé du préfixe numérique ou du nom de fichier).
  - La règle de nommage existante (ex. `N. Nom.md` → id/label = « Nom ») est respectée pour générer les entrées de `agents.json`.
  - **Réutiliser** le module existant `utils/environment.ts` (`isDevelopment()` / `isProduction()`) pour décider quand exécuter la synchronisation ; **ne pas** introduire de nouvelle détection d’environnement.

- **CA4 - Production / Vercel** :
  - Sur Vercel (ou tout environnement où `.cursor/agents` n’est pas disponible), le build ou l’exécution utilise uniquement `agents.json` pour construire les colonnes ; aucun accès au système de fichiers vers `.cursor/agents` n’est requis à l’exécution.

- **CA5 - Rétrocompatibilité** :
  - Les scénarios BDD et tests existants concernant les colonnes du board (ordre des agents, décomptes, WIP) restent valides ; ils s’appuient sur `agents.json` ou sur un jeu de données cohérent (fixtures ou génération avant test).

**Contexte** : Actuellement les colonnes agents sont lues depuis `.cursor/agents` dans `utils/sprintBoardReader.ts` (`readAgentsFromCursorAgents()`). Sur Vercel ce dossier peut être absent ou non déployé. En déplaçant la source de vérité vers `agents.json` (données versionnées) et en synchronisant ce fichier depuis `.cursor/agents` en dev, le board fonctionne partout.

**Note** : Changement backend uniquement (lecture `agents.json` au lieu de `.cursor/agents`, script de sync en dev). Aucun effet de bord pour le frontend ; l’étape TDD-front-end n’a normalement rien à implémenter (vérification / non-régression uniquement).
