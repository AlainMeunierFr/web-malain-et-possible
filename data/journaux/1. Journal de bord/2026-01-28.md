### UI/UX - Expériences à la demande

#### Affichage des expériences uniquement à la demande
##### Prompt
Sujet UI/UX. Les expériences ça charge beaucoup trop les pages. Peut-être faut-il trouver une ruse pour ne les afficher qu'à la demande.

##### Résultat technique
- Affichage des expériences uniquement après clic sur un bouton « Expériences et apprentissages (N) » dans `DomaineDeCompetences.tsx`
- État local `experiencesOuvert` (useState), liste et tri rendus seulement quand ouvert : allègement du premier rendu (pas de parse Markdown ni tri pour les expériences tant que non ouvert)
- Bouton avec chevron (ChevronDown/ChevronUp), accessibilité : aria-expanded, aria-controls, role="region"
- Styles dans `app/content-styles.css` : `.experiencesToggle`, `.experiencesToggleIcon`, `.experiencesContent`
- Tests unitaires adaptés : helper `ouvrirExperiences()` pour les tests qui vérifient le contenu ; nouveau test « masquer la liste par défaut »

#### Réduction taille police et images compétences
##### Prompt
Réduire la taille de la police pour "Expériences et apprentissages". Les images des compétences sont trop "présentes". Probablement faut-il les mettre plus petites.

##### Résultat technique
- `.experiencesTitre` : `font-size` 18px → 14px dans `app/content-styles.css`
- `.competenceImage` : `max-width` 200px → 100px dans `app/content-styles.css`
- Icônes Lucide dans `DomaineDeCompetences.tsx` : `size` 120 → 72

#### Ajustements espacements expériences et compétences
##### Prompt
"Expériences et apprentissages" est trop éloigné des 3 compétences. Dans compétences : le padding inférieur de "En savoir plus..." peut être de 10 pixels ; le padding inférieur du bloc "compétence" peut être 0 pixels.

##### Résultat technique
- `.experiencesContainer` : `margin-top` 10px → 0 pour rapprocher le bloc des compétences
- `.competenceBoutonContainer` : ajout de `padding-bottom: 10px`
- `.competenceCard` : `padding` 20px → `20px 20px 0 20px` (padding inférieur 0)

#### competenceBoutonContainer invisible sans bouton
##### Prompt
Le "competenceButtonContainer" (qui affiche "En savoir plus...") devrait être invisible s'il n'y a pas de bouton à afficher. Actuellement on visualise le padding haut et bas même lorsqu'il n'y a pas de bouton.

##### Résultat technique
- Dans `DomaineDeCompetences.tsx` : rendu conditionnel du bloc `.competenceBoutonContainer` uniquement si `competence.bouton && shouldDisplayButton(competence.bouton)` ; suppression du placeholder vide quand pas de bouton

### Sprint en cours – Nouvelles US Home Hero et Mes Profils

#### Ajout US-7.11 et US-7.12 au fichier de sprint
##### Prompt
"Discutons" et tu as maintenant en mode agent. Tu peux donc compléter le fichier de sprint en cours avec cette US

##### Résultat technique
- Ajout dans `data/A propos de ce site/2. Sprints/2026-01-26 - Transformation site vers recherche mission.md` :
  - **US-7.11** : Home Hero – Mise en page premier écran (gauche : nom, dispo, résumé, Télécharger CV, Discutons ; droite : vidéo ; rien en dessous). CTA contact libellé **"Discutons"** (et non "On discute ?"). Responsive.
  - **US-7.12** : Page "Mes Profils" – 4 blocs (titre, job titles, Télécharger CV PDF, En savoir plus) ; en dessous optionnellement le texte qui était sous la vidéo sur la home. Accessible depuis "Télécharger mon CV" du hero. Responsive.

### Agents Cursor – Refonte et guide d'utilisation

#### Création des agents US, BDD et mise à jour back-end, front-end, lead-dev
##### Prompt
Met à jour les informations dans .\cursor\agents pour créer ces agents et expliquer moi comment les utiliser correctement ensuite

##### Résultat technique
- **Nouveaux agents** : `us.md` (reformuler en US + CA, aucun code ni .feature ; commande GO US), `bdd.md` (écrire les .feature dans tests/bdd uniquement, Outside-in BDD ; commande GO BDD).
- **Agents mis à jour** : `back-end.md` (TDD métier, uniquement dans .\utils, architecture hexagonale ; commande GO TDD back-end), `front-end.md` (TDD Next.js dans app/ et components/, arbitrage serveur/client ; commande GO TDD front-end), `lead-dev.md` (valide les livrables, rappelle la phase, ne code pas ; flux US → BDD → TDD back-end → TDD front-end).
- **Guide d'utilisation** : contenu dans `.cursor/US-EN-COURS.md` – agents @US, @BDD, @TDD-back-end, @TDD-front-end, @lead-dev ; 3 commandes GO US, US VALIDÉE, GO NEXT.
- Flux acté : GO US → GO BDD → GO TDD back-end → GO TDD front-end.

#### US en cours implicite (sans paramètres)
##### Prompt
Les bonnes pratiques pourraient être implicites dans les appels car explicites dans la config. Une seule US à la fois, chaque agent de pouvoir savoir de façon implicite quel est l'US. Si aucune US en cours : alerte, erreur. Si une US en cours : on avance. GO US n'a pas besoin de paramètres mais prend le contexte de la conversation en cours pour formuler l'échange sous forme d'US. C'est possible ?

##### Résultat technique
- Création du fichier **`.cursor/US-EN-COURS.md`** : source de vérité pour "US en cours" (référence + titre court). Vide ou sans référence = aucune US en cours → agents BDD et TDD alertent et s'arrêtent.
- **GO US** : aucun paramètre ; l'agent US prend le **contexte de la conversation** pour formuler l'US. Une fois l'US validée, mise à jour de `.cursor/US-EN-COURS.md` avec la référence (ex. US-7.11).
- **GO BDD** / **GO TDD back-end** / **GO TDD front-end** : aucun paramètre ; chaque agent lit `.cursor/US-EN-COURS.md` pour savoir quelle US traiter. Si aucune US en cours → alerte, erreur.
- Mise à jour des agents **us.md**, **bdd.md**, **back-end.md**, **front-end.md**, **lead-dev.md** et du **README.md** : section "US en cours (implicite)", commandes sans paramètre, bonnes pratiques implicites dans la config.

#### Workflow à 3 commandes (GO US, US VALIDÉE, GO NEXT)
##### Prompt
Le fichier US-EN-COURS.md peut contenir en ligne 3 l'étape du workflow. Ainsi il n'y aurait que 3 commandes : GO US pour commencer une nouvelle US ; US COMPLEXE pour acter qu'elle est valide ; GO NEXT pour avancer de US -> BDD -> TDD back-end -> TDD front-end. Avant chaque GO NEXT le lead-dev contrôle que tout a été respecté. Si ce n'est pas le cas, faire itérer. Sinon changement l'étape et passer à l'agent suivant.

##### Résultat technique
- **`.cursor/US-EN-COURS.md`** : ligne 3 = étape du workflow (`US` | `BDD` | `TDD-back-end` | `TDD-front-end` | `done`). Documenté les **3 commandes** : **GO US** (commencer une US, étape = US), **US VALIDÉE** (ou US COMPLÈTE, ou US COMPLEXE) pour acter que l'US est validée (étape = BDD), **GO NEXT** (lead-dev contrôle l'étape en cours ; si non conforme faire itérer, sinon changer l'étape et passer à l'agent suivant).
- **lead-dev.md** : 3 commandes uniquement ; GO NEXT = contrôle avant chaque avance, si non conforme faire itérer, sinon mettre à jour ligne 3 et inviter à invoquer l'agent suivant (@BDD, @TDD-back-end, @TDD-front-end).
- **US.md**, **BDD.md**, **TDD-back-end.md**, **TDD-front-end.md** : invoqués via GO NEXT (étape BDD → @BDD, TDD-back-end → @TDD-back-end, TDD-front-end → @TDD-front-end) ; lecture de la ligne 3 pour l'étape.
- **README.md** : réécrit avec les 3 commandes uniquement, rôle du lead-dev avant chaque GO NEXT, séquence d'exemple.

#### Agent BDD – Reformulation en jargon technique
##### Prompt
Lorsque je mets une longue phrase / paragraphe sans termes techniques, cherche un vocable technique qui décrit sans ambiguïté ma demande (jargon pour être plus efficace).

##### Résultat technique
- Dans **`.cursor/agents/BDD.md`**, section « Tu fais » : ajout d’une consigne **Reformuler en jargon technique** : si l’utilisateur (ou l’US) exprime une longue phrase ou un paragraphe sans termes techniques, identifier un vocable technique qui décrit la demande sans ambiguïté (ex. « éviter de tout mettre en BDD » → « pas de BDD artificiel », « ce que l’utilisateur voit et peut faire » → « comportement observable »). Utiliser ce jargon pour être précis et efficace dans les scénarios et les échanges.

#### Nommage unique par type de contenu (toutes les couches)
##### Prompt
J'ai remarqué que des libertés étaient prises sur la façon de nommer les objets. Lorsqu'on crée un nouveau type, en particulier un nouveau "Type de contenu", il faut que ce nom soit respecté dans toutes les couches : depuis le nom de la propriété dans les JSON jusqu'au nom du style dans la feuille de style CSS. Formule ça en termes simples et concis aux agents.

##### Résultat technique
- **`.cursor/rules/lead-dev-principal.mdc`** : nouvelle section **Nommage (types de contenu)** dans Règles Communes : un seul nom par type de contenu, identique sur toutes les couches (propriété JSON, type/propriété TypeScript, classe CSS) ; pas de variante (ex. `hero` en JSON et `homeHero` en CSS).
- **`.cursor/agents/TDD-back-end.md`** (section « Tu fais ») : consigne **Nom unique par type de contenu** — même nom pour la propriété dans les JSON et pour le type/interface en TypeScript.
- **`.cursor/agents/TDD-front-end.md`** (section « Tu fais ») : consigne **Nom unique par type de contenu** — même nom pour le composant/élément et pour la classe CSS (pas de variante entre JSON, types, CSS).

### Refactoring expériences et apprentissages

#### Refactoring structure JSON expériences
##### Prompt
A mon avis il faut corriger le fichier JSON en repartant du MD. Le MD liste des "experience-et-autres-informations" avec des - Il faut en extraitement seulement les périodes, pour alimenter le champ "période" mais supprimer le champs "Titre" et n'alimenter, en conservant la syntaxe MD du gras, dans le champ "Description". Puis refactoriser tout le mode pour ne plus implémenter le champ "Titre"

##### Résultat technique
- Création d'un script de refactoring (`scripts/refactor-experiences-remove-titre.ts`) pour transformer le JSON
- Suppression du champ `titre` de l'interface `AutreElement` dans `utils/bibliothequeReader.ts`
- Modification du composant `DomaineDeCompetences.tsx` pour n'utiliser que le champ `description` avec syntaxe Markdown
- Mise à jour de tous les tests unitaires pour utiliser uniquement `description`
- Transformation de 145 expériences : extraction des périodes, fusion titre+description dans `description` avec syntaxe MD

#### Ajustements espacements expériences
##### Prompt
Il faut que visuellement les "Expériences et apprentissages" soient comprises comme partie intégrante du domaine qui est au desus. Les "Expériences et apprentissages" sont trop éloignées des 3 compétences - réduire le padding. Les "Expériences et apprentissages" sont trop éloignées entre elles- Réduire l'interligne. Les "Expériences et apprentissages" sont trop rapprochées du domaine de compétence suivant - augmenter le padding.

##### Résultat technique
- Réduction de `margin-top` de `.experiencesContainer` : 30px → 10px
- Réduction de `margin-bottom` de `.experienceItem` : 0.75rem → 0.4rem
- Réduction de `line-height` de `.experienceItem` : 1.6 → 1.4
- Ajout de `margin-bottom: 40px` à `.experiencesContainer`
- Uniformisation de l'espacement entre titre et expériences : `margin-bottom` de `.experiencesTitre` aligné avec `.experienceItem` (0.4rem)

#### Tri chronologique des expériences
##### Prompt
Trier les "Expériences et apprentissages" par date - les valeur "null" d'abord, par ordre inverse chronologique ensuite

##### Résultat technique
- Implémentation d'une fonction de tri dans `DomaineDeCompetences.tsx`
- Les périodes `null` sont placées en premier
- Tri chronologique inverse (plus récent en premier) pour les expériences avec période
- Fonction `getLatestYear()` pour extraire l'année la plus récente de différents formats de périodes (2022-2023, Depuis 2020, février-juin 2022, etc.)
- Correction d'un bug : vérification de type pour éviter `periode.match is not a function`

#### Correction doublons expériences
##### Prompt
Je suis en train de rellire (et mettre quelques mots en gras **) dans le fichier "experience-et-autres-informations.json" et j'ai l'impression de relire plusieursfois la même chose. Je n'ai pas souvenir d'avoir perçu lors de la relecture du MB d'origine. Peux tu faire une analyse "sémentique" de chaque compétence pour identifier les potentiels doublons ?

##### Résultat technique
- Analyse sémantique des expériences pour identifier les vrais doublons (expériences identiques pointant vers des domaines différents)
- Suppression de 8 expériences doublons : 75, 81, 95, 107, 124, 125, 126, 138
- Fusion de l'expérience 75 dans 23 (ajout de la période "Depuis 2013")
- Mise à jour des références dans `domaines.json` pour remplacer les IDs supprimés
- Résultat : 137 expériences (au lieu de 145)

#### Nettoyage expériences supplémentaires
##### Prompt
Supprime "[Depuis 2020] - Prise de conscience des enjeux énergétiques, climatiques et de l'empreinte matière". Ajoute "Depuis 2020" à la période de "Sensibilisation aux polycrises (pandémie, approvisionnement énergétique, inflation, guerres, désinformation, polarisation, inondations, sécheresses, mégafeux)". Supprime "5800 followers sur Linkedin"

##### Résultat technique
- Suppression de l'expérience 64 (doublon de 95 déjà supprimé)
- Ajout de la période "Depuis 2020" à l'expérience 97
- Suppression de l'expérience 58
- Mise à jour des références dans les domaines concernés

#### Ajout formations Sator
##### Prompt
Ajouter les compétences : - Grand cours Sator : "Olivier Hamant - Construire la robustesse" - Certifié - Grand cours Sator : "Arthur Keller - Risques systémiques et stratégies de résilience" - En cours. Type : "Formations et certifications". Ajouter au domaine de compétence "La ROBUSTESSE est la réponse opérationnelle à un monde fluctuant !*"

##### Résultat technique
- Ajout de 2 nouvelles expériences (IDs 146 et 147) dans `experience-et-autres-informations.json`
- Association au domaine `la-robustesse-est-la-reponse-operationnelle-a-un-monde-fluctuant`
- Type : "Formations et certifications"

#### Ajustements CSS
##### Prompt
Les boutons "En savoir plus..." dans les "compétences" : un padding de 10 pixels au dessus

##### Résultat technique
- Ajout de `padding-top: 10px` à `.domaineDeCompetence .competenceBoutonContainer` dans `app/content-styles.css`

### Amélioration script "Publie"

#### Refactoring script Publie pour chronométrage direct
##### Prompt
Pourquoi lancer les tests en async alors qu'on doit toujours les chronométrer ? - Lancer les tests avec chronométrage - Si ça ne passe pas, lister les échecs en expliquant l'exigence du test et la cause de l'échec pour permettre un arbitrage et s'arrêter - Si ça passe, publier

##### Résultat technique
- Refactoring complet du script `scripts/publie.ts`
- **Lancement direct avec chronométrage** : Les tests sont maintenant lancés directement avec `--coverage --json --outputFile=test-results.json` (plus de double exécution)
- **Analyse détaillée des erreurs** : Pour chaque test en échec, le script affiche :
  - L'exigence du test (nom du test)
  - La cause de l'échec (TypeError, ReferenceError, valeurs attendues/reçues, etc.)
  - Le message d'erreur complet si court (< 200 caractères)
- **Arbitrage facilité** : Le script explique clairement que l'échec peut être dû soit à un bug dans le code, soit à une évolution des spécifications nécessitant une mise à jour des tests
- **Workflow optimisé** : 3 étapes au lieu de 4 :
  1. Tests avec chronométrage (coverage + JSON)
  2. Collecte métriques E2E/BDD (si tests OK)
  3. Vérification couverture + publication Git
- **Pas de relance inutile** : Les tests Jest ne sont plus lancés deux fois (une fois sans timing, une fois avec)

#### Correction erreur TypeScript script analyse-bilan-competences
##### Prompt
Lors des 3 derniers commit cette erreur est apparue sur Vercel. Corrige la avant de publier à nouveau. Erreur : `domaine.contenu` n'existe pas (ligne 656). Mais zut de flute à la fin ! Le scenario est créé par le TI ! Il faut lancer ce TI avant de lancer les tests E2E pour s'assurer que le scénario est à jour

##### Résultat technique
- Correction de l'interface `Domaine` dans `scripts/analyse-bilan-competences.ts`
- Ajout des propriétés optionnelles `contenu?: string` et `auteur?: string` à l'interface
- Ces propriétés existent dans le JSON `domaines.json` mais n'étaient pas déclarées dans l'interface TypeScript
- Le code vérifiait déjà avec `if (domaine.contenu)` mais TypeScript ne reconnaissait pas la propriété
- **Ajout de la génération du scénario E2E** dans `scripts/publie.ts` avant de lancer les tests
- Le script génère maintenant le scénario E2E avec `npm run test:e2e:generate` en étape 0/4
- Cela garantit que le scénario E2E est à jour avant que les tests d'intégration ne vérifient la couverture des e2eID

#### Implémentation TDD-front-end US-7.12 (Page Mes Profils)
##### Prompt
GO NEXT (étape TDD-front-end pour US-7.12 : Page Mes Profils – sélection de profil et téléchargement CV).

##### Résultat technique
- **Données** : Ajout de `titreDePage` ("Mes Profils") dans `data/mes-profils.json` pour l’en-tête de page.
- **ProfilContainer** : Nouvelles props optionnelles `labelAcces` (défaut "Découvrir") et `labelCV` (défaut "Voir le CV") pour réutiliser le composant sur la page Mes Profils avec les libellés BDD "En savoir plus…" et "Télécharger le CV".
- **BlocsProfils** : Nouveau composant (`components/BlocsProfils.tsx`) qui affiche une section `.blocsProfils` avec une grille de cartes profil (réutilisation de `ProfilContainer` avec les libellés Mes Profils).
- **PageContentRenderer** : Prise en charge du type `profils` → rendu via `BlocsProfils`.
- **Styles** : Grille responsive dans `app/content-styles.css` (`.blocsProfils`) : 1 colonne mobile, 2 colonnes à partir de 769px, 4 colonnes à partir de 1200px.
- **Page Mes Profils** : `app/mes-profils/page.tsx` utilise `readPageData('mes-profils.json')` et `PageContentRenderer` ; imports corrigés (`../../utils`, `../../components`).
- **Tests unitaires** : `tests/unit/BlocsProfils.test.tsx` (4 blocs, job titles, liens "Télécharger le CV" et "En savoir plus…") ; `tests/unit/mes-profils-page.test.tsx` (titres des 4 profils, lien Discutons, liens CV/En savoir plus) ; mise à jour `ProfilContainer.test.tsx` (libellés personnalisés) et `PageContentRenderer.test.tsx` (cas `profils`).
- **Workflow** : `.cursor/US-EN-COURS.md` passé à étape `done` pour US-7.12.

#### Lien "Télécharger le CV" en forme de bouton
##### Prompt
Télécharger le CV doit être techniquement un <a> html (lien) mais avoir la forme d'un bouton (comme "En savoir plus...")

##### Résultat technique
- **ProfilContainer** : le lien CV (`<a href={cvPath} target="_blank" rel="noopener noreferrer">`) utilise désormais la classe `bouton` au lieu de `lienCV`, afin d’avoir le même rendu visuel que le lien "En savoir plus…".
- **button-styles.css** : règle `.profil .bouton` (en plus de `.hero .profil .bouton`) pour que les deux boutons des cartes profil aient la même largeur et hauteur minimale sur la page Mes Profils et dans le hero.
- **content-styles.css** : suppression des styles `.profil .lienCV` et `.profil .lienCV:hover` devenus inutiles.

#### Confirmation nom "lien interne" et option A, CTA unique
##### Prompt
Nom "lien interne" et option A. Le bouton (qui permet aussi d'accéder à une page du site) est en effet le CTA unique de tout le site.

##### Résultat technique
- Commentaire renforcé dans `app/content-styles.css` pour la classe `.lienInterne` : préciser que le bouton `.bouton` est le CTA unique du site (accès aux pages) et que `.lienInterne` reste un lien texte pour la navigation secondaire.

#### Type de contenu Titre : taille police, fond et police
##### Prompt
Type de contenu "Titre" : même taille de police que le bouton "Discutons" ; fond : --BleuClair ; Police : --BleuFoncé

##### Résultat technique
- Dans `app/content-styles.css` : `.titre` : `background-color` passé de `var(--BleuFonce)` à `var(--BleuClair)` ; `.titre h1` : `font-size` fixé à 16px (même taille que le bouton Discutons, `.bouton` dans button-styles.css), `color` passé de `#ffffff` à `var(--BleuFonce)`. Toutes les surcharges dans les media queries (769px, 1024px, 1440px, 1920px) alignées sur 16px pour le titre.

#### Cartes profil : deux liens plus élégants (En savoir plus… / CV)
##### Prompt
Les deux liens l'un sous l'autre ne sont pas élégants : l'un en gras, l'autre pas ; le CV avec icône + 2 lettres + 3 lettres entre () fait plein de messages visuels (ponctuation, abréviation…) : on a l'impression d'être dans une fenêtre terminal des années 70. Il faudrait quelque chose de plus graphique ou trouver une solution pour "éloigner" les deux liens l'un de l'autre.

##### Résultat technique
- **ProfilContainer** : le lien CV affiche désormais le libellé `labelCV` ("Télécharger le CV" sur Mes Profils, "Voir le CV" dans le hero) au lieu de "CV (PDF)" ; `title` mis à `${labelCV} (PDF)` pour l'accessibilité. Moins de ponctuation visible, libellé plus lisible.
- **content-styles.css** : `.profilLienCV` : `margin-top` augmenté à 1.25rem (desktop) et 1rem (mobile) pour bien séparer visuellement "En savoir plus…" du lien CV ; `font-size` aligné sur `.lienInterne` (0.9375rem) ; `font-weight: 600` pour cohérence avec le lien "En savoir plus…". Les deux liens ont désormais le même poids et la même taille, avec un espacement net entre eux.
- **Tests** : ProfilContainer.test.tsx, BlocsProfils.test.tsx, mes-profils-page.test.tsx mis à jour pour chercher "Télécharger le CV" ou "Voir le CV" selon le contexte, et `title` "… (PDF)".

#### Très grands écrans (5120x2160) – exploitation de l'espace sur tout le site
##### Prompt
Il y avait un test dans le BDD mais aussi une contrainte dans les consignes front-end pour que le contenu exploite au mieux l'espace disponible sur les écrans très grands. Or actuellement le site est petit en plein de l'espace de 5120x2160. Corrige pour tout le site.

##### Résultat technique
- **content-styles.css** : (1) `.titre` : ajout de `max-width` progressif dans les breakpoints 1920px (1100px), 2560px (1200px), 3840px (1400px) ; (2) `.hero:has(.heroGauche)` : ajout dans 1920 (1400px), 2560 (1600px), 3840 (1800px) pour que la grille hero s’élargisse avec le viewport ; (3) nouveau breakpoint **@media (min-width: 5120px)** : `.titre` 1600px, `.texteLarge` / `.domaineDeCompetence` / `.callToAction` / `.groupeBoutons` 2400px, `.hero:has(.heroGauche)` et `.hero .content` 2400px, `.video` 1400px, `.videoDetournement` / `.temoignages` 1600px, `.listeDesPages` 2400px, `.blocsProfils` 2400px + margin auto + padding 3rem ; espacements (padding) augmentés pour ce breakpoint.
- **button-styles.css** : @media (min-width: 5120px) – `.callToAction .bouton` max-width 1400px.
- **shared.module.css** : @media (min-width: 5120px) – `.main` padding-top/bottom augmentés.
- **a-propos/about.module.css** : @media (min-width: 5120px) – `.content` max-width 2400px (bloc placé après 1920 pour override).
- **metrics/metrics.module.css** : @media (min-width: 5120px) – `.container` max-width 2400px.
- **maintenance/maintenance.module.css** : @media (min-width: 5120px) – `.maintenancePage` max-width 2400px, margin auto, padding 40px.
- Alignement avec la contrainte TDD front-end (design responsive jusqu’à 5120x2160) et le scénario BDD « Hero sur très grand écran (largeur ≥ 3000px) ».

#### Zoom du contenu sur écrans 5K+ (coef. 1.33)
##### Prompt
Les header et footer c'est OK. C'est le contenu de la page qui n'exploite pas tout l'espace blanc disponible. Il faut appliquer un coef pour "zoomer" la taille nominale du contenu des pages.

##### Résultat technique
- **Coefficient 1.33 (4/3)** appliqué au breakpoint **@media (min-width: 5120px)** pour zoomer le contenu (largeurs max, polices, espacements).
- **content-styles.css** : max-width × 1.33 (2400→3200, 1600→2133, 1400→1867) ; tailles de police × 1.33 pour .titre h1, .texteLarge p, .domaineDeCompetence, .video, .videoDetournement, .temoignages, .hero ; espacements × 1.33 ; cartes profil et .listeDesPages .bouton mis à l'échelle.
- **button-styles.css** : .callToAction .bouton max-width 1867px ; .bouton font-size 24px, padding 18px 36px.
- **about.module.css** : .content max-width 3200px, font-size 1.2rem, titres × 1.33.
- **metrics.module.css** : .container max-width 3200px, .title 3.33rem.
- **maintenance.module.css** : .maintenancePage max-width 3200px, padding 53px, titres et bouton Easter egg × 1.33.

#### Augmentation du zoom 5K+ (coef. 1.33 → 1.6)
##### Prompt
C'est mieux mais il reste plein de place.

##### Résultat technique
- **Coefficient 5120px** passé de **1.33** à **1.6** pour mieux remplir l'écran (~75 % de la largeur).
- **content-styles.css** : max-width 3200→3840px (blocs principaux, hero, liste, blocsProfils), 2133→2240px (titre, video), 2133→2080px (videoDetournement, temoignages) ; polices et espacements × 1.6 ; cartes profil et boutons plan du site à l'échelle 1.6.
- **button-styles.css** : .callToAction .bouton max-width 2240px ; .bouton font-size 26px, padding 22px 44px.
- **about.module.css** : .content max-width 3840px, font-size 1.28rem, titres × 1.6.
- **metrics.module.css** : .container 3840px, .title 4rem.
- **maintenance.module.css** : .maintenancePage 3840px, padding 64px, titres et Easter egg × 1.6.

#### Zoom dynamique : coef = largeur écran / 2000
##### Prompt
Le coef doit être la largeur de l'écran par rapport à 2000. Largeur écran / 2000. Si 3000 = appliquer 1,5. Si 5000 = appliquer 2,5. Testons ça.

##### Résultat technique
- **Coefficient dynamique** : à partir de **@media (min-width: 2000px)**, toutes les largeurs max, polices et espacements utilisent **calc(BASE * (100vw / 2000))** (base = valeur à 2000px). Ainsi coef = 1 à 2000px, 1.5 à 3000px, 2.5 à 5000px.
- **content-styles.css** : suppression des blocs 2560px et 3840px ; remplacement du bloc 5120px par un bloc **2000px** avec calc() pour .titre, .texteLarge, .domaineDeCompetence, .callToAction, .groupeBoutons, .hero, .video, .videoDetournement, .temoignages, .listeDesPages, .blocsProfils (max-width, font-size, padding). Bases = valeurs du bloc 1920px.
- **button-styles.css** : bloc 5120px remplacé par **2000px** – .callToAction .bouton max-width et .bouton font-size/padding en calc().
- **about.module.css** : blocs 2560, 3840, 5120 remplacés par un bloc **2000px** – .content max-width, font-size, titres en calc().
- **metrics.module.css** : blocs 2560, 3840, 5120 remplacés par un bloc **2000px** – .container max-width, .title font-size en calc().
- **maintenance.module.css** : bloc 5120px remplacé par **2000px** – .maintenancePage, .title, .easterEggTitle, .easterEggMessage, .easterEggButton en calc().

#### Hero (texte gauche + vidéo droite) : zoom et contenu tronqué
##### Prompt
Tout à l'air plus grand en effet, sauf les blocs contenant les textes à gauche et la vidéo à droite. Du coup le contenu est tronqué.

##### Résultat technique
- Dans le bloc **@media (min-width: 2000px)** de `app/content-styles.css` : (1) **.hero:has(.heroGauche)** : ajout de **gap: calc(32 * (100vw/2000))** pour que l’espace entre les deux colonnes (texte et vidéo) augmente avec le viewport ; (2) **.hero .boutonPrincipalContainer .bouton, .hero .heroCtas .bouton** : **max-width: calc(400 * (100vw/2000))** pour que les boutons « Télécharger mon CV » et « Discutons » grandissent avec le coefficient ; (3) **.hero .boutonPrincipalContainer, .hero .heroCtas** : **gap** et **margin-bottom** en calc() pour homogénéiser les espacements. La grille hero (.hero:has(.heroGauche)) avait déjà max-width en calc() ; les colonnes 1fr 1fr en profitent dès que la grille s’élargit.

### Stratégie zoom appliquée à toutes les pages (Faisons connaissance et très grands écrans)

#### Pleine largeur et zoom sur toutes les pages
##### Prompt
OK, maintenant il faut appliquer cette stratégie sur toutes les pages. Par exemple "Faisons connaissance" les 3 boutons sont perdus en plein milieu de la page. Et ça doit être pareil sur toutes les pages. Ce qui serait cool c'est de factoriser la stratégie de zoom dans le CSS unique (si c'est possible). Je dois m'absenter. Ce qui me ferait plaisir c'est de revenir avec tout le site fonctionnel et propre sur très grand écran.

##### Résultat technique
- **Faisons connaissance (groupeBoutons)** : dans **app/button-styles.css** (bloc 2000px), **.groupeBoutons.tailleGrande .bouton** : **width** et **padding** en **calc(… * (100vw / var(--viewport-ref, 2000)))** pour que les 3 boutons grandissent avec le viewport au lieu de rester à 480px ; dans **app/content-styles.css** (bloc 2000px), **.groupeBoutons.tailleGrande .texte** en calc() et **.groupeBoutons.tailleGrande** **gap** en calc() pour cohérence.
- **Factorisation zoom** : **button-styles.css** utilise **var(--viewport-ref, 2000)** (défini dans content-styles.css bloc 2000px) pour aligner sur la même stratégie.
- **Pleine largeur sur toutes les pages** : **app/content-styles.css** avait déjà à 769px **width: 100%; max-width: 100%** pour .titre, .texteLarge, .domaineDeCompetence, .callToAction, .groupeBoutons, .video, etc. ; **app/metrics/metrics.module.css** : ajout **@media (min-width: 769px)** puis **2000px** avec **.container { max-width: 100% }** ; **app/maintenance/maintenance.module.css** : **@media (min-width: 769px)** et **1920px** avec **.maintenancePage { max-width: 100% }**, bloc 2000px inchangé (max-width 100%) ; **app/a-propos/about.module.css** : **769px** et **1920px** avec **.content { max-width: 100% }**, bloc 2000px **.content { max-width: 100% }**.
- **shared.module.css** : suppression des blocs 2560px, 3840px, 5120px ; un seul bloc **@media (min-width: 2000px)** avec **.main** padding-top/padding-bottom en **calc(… * (100vw / 2000))** pour aligner la stratégie zoom sur le conteneur principal.
- Build Next.js OK.

### Restauration mise en page Home (US-7.11) après fusion CSS

#### Reprise US-7.11 / US-7.12 – layout hero et BDD/tests
##### Prompt
La mise en page de Home a été perdue. Il faut reprendre les US, BDD et tests des US-7.11 et US-7.12.

##### Résultat technique
- **Cause** : après fusion de shared.module.css et button-styles.css dans content-styles.css, le layout hero deux colonnes (US-7.11) avait disparu : la version restaurée depuis git ne contenait pas les règles **.hero:has(.heroGauche)** (grille 1fr 1fr), **.heroGauche**, **.heroDroite** ni les styles pour la vidéo dans la zone droite.
- **Correction** : dans **app/content-styles.css**, section hero (US-7.11) : (1) **.hero .heroGauche** et **.hero .heroDroite** (zones gauche/droite) ; (2) **.hero .heroDroite .video** (vidéo pleine largeur, ratio 16:9) ; (3) **@media (min-width: 769px)** **.hero:has(.heroGauche)** : **display: grid**, **grid-template-columns: 1fr 1fr**, **gap: 2rem**, **min-height: 60vh** ; (4) **@media (max-width: 768px)** **.hero:has(.heroGauche)** : **flex-direction: column** ; (5) alignement texte gauche en layout deux colonnes (**.hero:has(.heroGauche) .heroGauche h1/h2/.description** : **text-align: left**) ; (6) **.hero .heroCtas** (aligné sur le composant HeroSection) : même styles que **.boutonPrincipalContainer**, **.heroCtas .bouton** max-width 400px, **justify-content: flex-start** en layout deux colonnes.
- **Tests unitaires** : HeroSection.test.tsx, mes-profils-page.test.tsx, BlocsProfils.test.tsx, indexReader.indexJson.test.ts — tous passent (29 tests).
- **BDD** : les features **home-hero-premier-ecran.feature** (US-7.11) et **mes-profils.feature** (US-7.12) sont présentes ; les steps partagés existent dans **pages-profils-cibles.steps.ts** (fichier JSON, chargement page). Les scénarios qui utilisent des steps spécifiques (ex. « avec un titre "Alain Meunier" », « zone gauche du hero ») peuvent nécessiter l’ajout de steps dédiés pour être exécutables en E2E.

### Reconstruction mise en page US-7.11 / US-7.12 (sans grands écrans)

#### Titre, blocsProfils, profilCarte / profilLienCV
##### Prompt
Reconstruire uniquement les ajustements de mise en page « normaux » pour US-7.11 et US-7.12 : Titre (fond BleuClair, h1 16px BleuFonce), .blocsProfils (grille 1/2/4 colonnes), .profilCarte / .profilCtaLabel / .profilLienCV (carte cliquable et lien CV). Pas de CSS 2000px/5120px/zoom.

##### Résultat technique
- **Type de contenu Titre** : dans **app/content-styles.css**, `.titre` : **background-color: var(--BleuClair)** ; **max-width: 947px**, **margin: 0 auto** ; `.titre h1` : **font-size: 16px** (aligné bouton Discutons), **color: var(--BleuFonce)**. Media queries 769px et 1920px/2560px/3840px : `.titre h1` maintenu à **16px** partout (pas de gros titres sur grands écrans).
- **Page Mes Profils (US-7.12)** : ajout de **.blocsProfils** : grille **1 colonne** (mobile), **repeat(2, 1fr)** à 769px, **repeat(4, 1fr)** à 1200px ; **gap**, **padding**, **margin-top** cohérents. Aucun max-width 2000px/zoom.
- **ProfilContainer (cartes profil)** : remplacement des anciennes règles **.profil .boutons** et **.profil .lienCV** par **.profilCarte** (carte entière cliquable : flex column, text-decoration none, color inherit), **.profilCtaLabel** (margin-top 0.75rem, style lien interne), **.profilLienCV** (inline-flex, gap 0.35rem, margin-top 1.25rem, font-size 0.9375rem, font-weight 600, color BleuFonce, underline, hover opacity 0.85). Responsive mobile : **.profilCarte .profilCtaLabel** et **.profilLienCV** margin-top/font-size ajustés.
- **Tests unitaires** : HeroSection, BlocsProfils, mes-profils-page, ProfilContainer — 26 tests passent.

#### Adaptation tests unitaires après évolution mes-profils.json
##### Prompt
Adapter les tests : (1) mesProfilsReader — un titreDePage a été ajouté en premier, décaler les assertions (nouvel ordre : titreDePage, profils, callToAction, texteLarge, témoignages) ; (2) temoignagesJson — les témoignages ont été déplacés dans mes-profils.json, les tests doivent cibler mes-profils.json au lieu de profil-cpo.json.

##### Résultat technique
- **tests/unit/mesProfilsReader.test.ts** : (1) nouveau test « premier élément est titreDePage » (contenu[0]) ; (2) « deuxième élément est de type profils avec les 4 profils » (contenu[1]) ; (3) « troisième élément est le CTA Discutons » (contenu[2]) ; (4) « quatrième élément est texteLarge » (contenu[3]).
- **tests/unit/temoignagesJson.test.ts** : les deux tests qui lisaient profil-cpo.json pour les éléments "temoignages" lisent désormais mes-profils.json ; commentaire et variable inutilisée profilCpoPath supprimés.
- Les deux suites passent (10 tests au total).

#### Marges latérales 4% sur la Home
##### Prompt
Sur la Home mettre 4% de marge à droite et à gauche.

##### Résultat technique
- **app/page.tsx** : classe `home` ajoutée sur le `<main>` (className="main home").
- **app/content-styles.css** : règle **.main.home** avec **margin-left: 4%** et **margin-right: 4%** (uniquement sur la page d'accueil). Puis remplacé par padding 4% sur le hero uniquement (voir entrée « Home : 4% padding hero »).

#### Home : 4% padding hero (éviter que la vidéo sorte de l'écran)
##### Prompt
La marge 4% à gauche/droite fait sortir la vidéo de l'écran. Il faut : écran en deux (gauche textes et boutons, droite vidéo), vidéo qui garde ses proportions, 4% de la largeur d'écran en padding à gauche du texte et 4% à droite de la vidéo.

##### Résultat technique
- **Suppression** des marges sur **.main.home** (margin-left/right 4% retirées) pour éviter le débordement de la vidéo.
- **.hero** : ajout de **box-sizing: border-box**.
- **.main.home .hero:has(.heroGauche)** : **padding-left: 4%** et **padding-right: 4%** (uniquement le hero Home en layout deux colonnes). La grille 1fr 1fr occupe donc 92 % de la largeur ; la vidéo reste dans sa colonne et conserve son ratio 16:9.

#### Hero : doubler les espacements Description → Télécharger mon CV et Télécharger mon CV → Discutons
##### Prompt
Doubler l'espace entre "Description" et "Télécharger mon CV" et idem entre "Télécharger mon CV" et "Discutons".

##### Résultat technique
- **.hero .description** : **margin-bottom** 1.5rem → **3rem** (desktop) ; en mobile 1rem → **2rem**.
- **.hero .heroCtas** (et .boutonPrincipalContainer) : **gap** 1rem → **2rem** (espace entre les deux liens).

#### Home Hero : ordre CTAs, Télécharger mon CV en lien, Discutons seul bouton (CTA)
##### Prompt
HomePage : (1) Mettre "Discutons" sous "Télécharger mon CV" ; (2) Mettre "Télécharger mon CV" dans le même style que "En savoir plus...". D'une manière générale le seul bouton est "Discutons" (CTA du site, répété sur toutes les pages). Les autres liens sont de type URL (texte, bleu, souligné).

##### Résultat technique
- **HeroSection.tsx** : lien "Télécharger mon CV" passé de **className="bouton"** à **className="lienInterne"** (style lien : bleu, souligné) ; "Discutons" reste **className="bouton"** (seul CTA bouton du site). Ordre inchangé dans le DOM : Télécharger mon CV puis Discutons.
- **content-styles.css** : (1) **.hero .heroCtas** (et .boutonPrincipalContainer) : **flex-direction: column** et **align-items: center** pour afficher "Discutons" sous "Télécharger mon CV" ; (2) **.hero .heroCtas .lienInterne** : **display: block** pour que le lien hero prenne sa ligne. Règle design : le seul bouton du site est Discutons (CTA) ; les autres liens sont style URL (lienInterne).
- Tests HeroSection : 12 passent (aucune assertion sur la classe du lien Télécharger mon CV).

#### Retours à la ligne dans la description du hero
##### Prompt
"description" contient des "\n". Il faut gérer les retours à la ligne dans l'affichage.

##### Résultat technique
- **app/content-styles.css** : sur **.hero .description**, ajout de **white-space: pre-line** pour que les caractères de fin de ligne (`\n`) dans la chaîne description s'affichent comme des retours à la ligne (les espaces multiples restent fusionnés). HeroSection convertit déjà les séquences littérales `\n` en sauts de ligne via `replace(/\\n/g, '\n')`.

### Plan du site – zone Home

#### Zone du haut : afficher une 2e page en dessous de « Home »
##### Prompt
La zone du haut, qui affiche "Home" doit aussi afficher une 2e page en dessous. Actuellement ce n'est pas le cas. Peut être parce que le contenant a une hauteur fixe ?

##### Résultat technique
- **Cause** : (1) Dans `_Pages-Et-Lien.json`, la page "Mes Profils" a **zone: "Home"** alors que le composant ne regroupait que **"HomePage"** — la 2e page était donc exclue de la zone du haut. (2) La zone utilisait **flex-direction: row** et **flex-wrap: nowrap**, ce qui disposait les boutons horizontalement sans hauteur fixe explicite.
- **ListeDesPages.tsx** : la zone du haut regroupe désormais les pages avec **zone === 'HomePage' || zone === 'Home'**, triées par **ordre** ; "Home" et "Mes Profils" s'affichent dans la même zone.
- **content-styles.css** : **.ligne-1** et **.zone-homepage** passent en **flex-direction: column** pour empiler les pages verticalement (Home puis Mes Profils en dessous). Ligne 2 (Profils) reste en row. Media query mobile : **.ligne-1** ne change que le gap ; **.ligne-2** garde le passage en column sur petit écran.

#### Bouton Discutons (callToAction) moins large
##### Prompt
Page "mes contacts" : faire le bouton "Discutons" moins large. Il est ridicule.

##### Résultat technique
- **app/content-styles.css** : **.callToAction .bouton** : **width: 100%** et **max-width: 947px** remplacés par **width: auto** et **max-width: 320px** pour que le bouton « Discutons » ne s’étire plus sur toute la largeur. À 1920px : **max-width: 360px**. Le CTA Discutons (composant CallToAction) est utilisé sur mes-profils, portfolio-detournements, maintenance, etc.

#### Correction e2eid bouton Plan du site dans le footer (E2E)
##### Prompt
Error: Impossible de trouver le bouton Plan du site (e2eid-b13) dans le footer. (parcours-complet-liens.spec.ts)

##### Résultat technique
- **Cause** : dans **FooterButton.tsx**, pour les liens internes (dont « Plan du site » → /plan-du-site), le composant écrasait le `data-e2eid` fourni par `linkProps` (e2eid-b13 depuis _footerButtons.json) par une valeur en dur **data-e2eid="l33"**. Tous les boutons internes du footer avaient donc `data-e2eid="l33"` au lieu de leur e2eID (b9, b13, b14, b15).
- **Correction** : suppression de l'attribut en dur sur le `<Link>` interne ; seul `{...linkProps}` est utilisé, ce qui applique le bon `data-e2eid` (ex. `e2eid-b13` pour Plan du site). Le test E2E qui cible `getByTestId('e2eid-b13')` trouve désormais le bouton.

#### Validation e2eID dans le script de génération du scénario E2E
##### Prompt
Il faut que le code qui crée le scénario de test automatiquement vérifie que tous les ID d'éléments d'interface cliquable soient présents mais aussi qu'aucun e2eID présent dans les tests ne corresponde plus à aucun élément présent dans les pages.

##### Résultat technique
- **FooterButton.tsx** : suppression définitive de l'attribut en dur (réapparu en `data-e2eid="l34"`) sur le `<Link>` interne ; seul `{...linkProps}` est utilisé.
- **scripts/generate-e2e-scenario.ts** :
  - **getFooterE2eIds()** : lecture de `data/_footerButtons.json` pour inclure les e2eID du footer dans la source de vérité (fichier ignoré par l'inventaire).
  - **getE2eIdsUsedInGeneratedCode(code)** : extraction des e2eID référencés dans le code généré (regex `getByTestId('e2eid-XXX')`).
  - **validateE2eIdsConsistency(codeTest, inventory, footerE2eIds, planPages)** : avant écriture du spec, vérification que tout e2eID utilisé dans le scénario existe dans l'app — source de vérité = inventaire + footer + header (E2E_IDS) + liens du plan du site (e2eID déterministe via `generateE2eIdFromUrl`). Si un e2eID du test est absent de l'app → erreur et `process.exit(1)` avec message explicite.
- Ainsi, aucun e2eID orphelin (présent dans le test, absent de l'app) n'est écrit ; si un composant écrase ou oublie un data-e2eid, la régénération du scénario échoue et signale les incohérences.

#### Utilisation de l'attribut e2eid (et non data-e2eid)
##### Prompt
Le test échoue encore. Qu'est-ce que c'est que ce "data-e2eid". La seule propriété à utiliser est "e2eid=".

##### Résultat technique
- **Attribut unique** : remplacement de **data-e2eid** par **e2eid** partout (attribut HTML/JSX `e2eid="..."`).
- **Config** : **playwright.config.ts** et **jest.setup.js** : `testIdAttribute: 'e2eid'` (Playwright et Testing Library ciblent l'attribut `e2eid`).
- **Composants** : FooterButton, ListeDesPages, GroupeBoutons, HeroSection, CallToAction, Header, ProfilContainer, DomaineDeCompetences, not-found, PasswordModal — tous utilisent désormais `e2eid={...}` ou `e2eid="..."`.
- **Header** : le logo utilise `e2eid="e2eid-h1"` (aligné sur E2E_IDS.header.logo).
- **Utils** : e2eIdGenerator, e2eIdDetector, e2eIdInventory — patterns et messages basés sur **e2eid**.
- **Script** : generate-e2e-scenario.ts — sélecteurs `[e2eid^="e2eid-l"]` au lieu de `[data-e2eid^=...]`.
- **Tests** : spec E2E et tests unitaires (ListeDesPages, FooterButton, HeroSection, PageContentRenderer, etc.) et test d'intégration e2e-ids-coverage — assertions et mocks sur **e2eid**.
- **FooterButton** : suppression définitive de la valeur en dur sur le lien interne ; seul `{...linkProps}` (e2eid issu du JSON) est utilisé.

### Générateur E2E – Algorithme de navigation et respect du plan

#### Algo de navigation et fallback accueil (hasLinkFromAccueil)
##### Prompt
C'est un enfer ! Explique-moi cet algo qui semble construire un scénario n'importe comment. Il faut arrêter de le refactoriser n'importe comment sans respecter les spécifications. Est-il protégé par des TDD ? (Erreur : Impossible de trouver un lien vers /detournement-video depuis l'accueil.)

##### Résultat technique
- **Spécification** : la source de vérité est **\_Pages-Et-Lien.json**. Une page n'est accessible « depuis l'accueil » que s'il existe un lien `source: "/"` vers cette page dans le plan. Pour /detournement-video (et /faisons-connaissance, /mes-profils, etc.) il n'y a **pas** de lien depuis "/" → le scénario ne doit **jamais** générer un fallback « Via logo → accueil → chercher lien vers la destination » pour ces pages.
- **Bug corrigé** : dans **scripts/generate-e2e-scenario.ts**, branche « Pas de label disponible » : quand le bouton Plan du site (e2eid-b13) n'est pas trouvé, le script générait systématiquement un fallback « depuis l'accueil » ; désormais il ne le fait que si **hasLinkFromAccueil** est vrai (`liens.some(l => l.source === '/' && l.destination === page)`). Sinon : `throw new Error('...n\'est accessible que via le plan du site.')`.
- **Documentation** : en-tête du script complété avec l'algorithme de navigation (lien direct par label, Plan du site, fallback accueil uniquement si hasLinkFromAccueil, pages footer).
- **Spec corrigé** : **tests/end-to-end/parcours-complet-liens.spec.ts** — pour les étapes vers /detournement-video, /faisons-connaissance, /mes-profils, /portfolio-detournements, /pour-aller-plus-loin, /profil/cpo, /profil/coo, /profil/agile, /profil/cto : le bloc `else` (b13 absent) génère désormais un `throw` explicite au lieu de « Via logo → accueil → lien vers la destination ».
- **TDD** : le script n'était pas protégé par des tests unitaires sur cette règle. Ajout dans **tests/integration/generate-e2e-plan.integration.test.ts** : (1) après génération, si le plan n'a pas de lien "/" → "/detournement-video", le spec généré ne doit pas contenre « lien vers /detournement-video depuis l'accueil » ; (2) test unitaire de la règle : hasLinkFromAccueil('/detournement-video') === false, hasLinkFromAccueil('/a-propos') === true avec le plan actuel.

#### Correction TimeoutError waitFor bouton Plan du site (e2eid-b13)
##### Prompt
Il faut trouver la cause racine de cette erreur. TimeoutError: locator.waitFor: Timeout 10000ms exceeded. waiting for getByTestId('e2eid-b13').first() to be visible. Et pourtant la page a bien le lien avec e2eid="e2eid-b13".

##### Résultat technique
- **Cause** : l’élément est bien présent dans le DOM (e2eid="e2eid-b13") mais Playwright considère qu’il n’est pas « visible » (viewport, layout, timing). Un `waitFor({ state: 'visible' })` peut donc expirer alors que l’élément est attaché.
- **Correction** : dans **scripts/generate-e2e-scenario.ts**, toutes les occurrences de `waitFor({ state: 'visible', timeout: 10000 })` pour le bouton Plan du site ont été remplacées par `waitFor({ state: 'attached', timeout: 10000 })`. On attend uniquement que l’élément soit dans le DOM ; `click()` scrollera automatiquement vers l’élément si besoin.
- **Spec** : **tests/end-to-end/parcours-complet-liens.spec.ts** utilisait déjà `state: 'attached'` (correction manuelle antérieure). Le générateur produit désormais le même code pour les prochaines régénérations.

#### Cause racine TimeoutError e2eid-b13 : locator explicite et attente du footer
##### Prompt
Toujours la même erreur. Le footer est bien affiché et une analyse HTML de la page confirme la présence de l'ID. TimeoutError: waiting for getByTestId('e2eid-b13').first() (attached).

##### Résultat technique
- **Cause** : dans l’environnement de test Playwright, `getByTestId('e2eid-b13')` (qui dépend de `testIdAttribute: 'e2eid'`) ne trouvait pas l’élément alors qu’il est présent en HTML. Le Footer est un client component ; un décalage d’hydratation ou de config peut faire que le sélecteur échoue.
- **Correction** : (1) **Attendre le footer** : `await page.locator('footer').waitFor({ state: 'attached', timeout: 10000 });` avant de chercher le bouton, pour s’assurer que le bloc est dans le DOM. (2) **Locator explicite** : remplacer `page.getByTestId('e2eid-b13')` par `page.locator('[e2eid="e2eid-b13"]')` pour ne plus dépendre de `testIdAttribute` et cibler directement l’attribut dans le DOM.
- **Fichiers** : **tests/end-to-end/parcours-complet-liens.spec.ts** (10 occurrences) et **scripts/generate-e2e-scenario.ts** (5 blocs) mis à jour ; les prochaines régénérations du spec utiliseront le même pattern.

### Assistant scénario E2E – Retours forme et données

#### Plan du site, listes et boutons (forme)
##### Prompt
Forme – Présentation. Plan du site : texte des boutons plus petits, largeur des boutons tous identiques, hauteur pour afficher le titre sur 2 lignes si nécessaire, mise en page en 4 zones (Home / Profils / Autres / Footer). Liste : police plus petite, ascenseur sur la liste (pas sur la page). Boutons (Annuler, Tout annuler, Générer) plus petits et au-dessus de la liste.

##### Résultat technique
- **AssistantScenario.module.css** : plan en 4 blocs (`.zoneBlock`, `.zoneTitle`) ; boutons du plan avec `min-width/max-width: 140px`, `min-height: 2.6em`, `font-size: 0.8rem`, `padding` réduit ; listes avec `font-size: 0.8rem` et conteneur `.listItemsWrapper` avec `max-height: 200px` et `overflow-y: auto` (ascenseur sur la liste uniquement) ; boutons de contrôle plus petits (`padding: 6px 12px`, `font-size: 0.85rem`) et déplacés au-dessus des listes.
- **AssistantScenario.tsx** : groupement des pages par zone (HomePage, Profils, Autres, Footer) avec titres de zone ; `buttonsRow` déplacé dans le `sidebar` au-dessus des deux `listBox` ; listes enveloppées dans `listItemsWrapper` pour le scroll.

#### Lien Home → Mes Profils et script plan du site (données)
##### Prompt
Fond – Data. On peut aller de Home vers Mes Profils : Mes Profils devrait être bleu clair. Pourquoi autant de liens vers les footers ? On ne va les tester que depuis une page. On peut toujours aller sur Home via le bouton Logo. Le script qui génère la liste des liens a-t-il été lancé dernièrement ?

##### Résultat technique
- **Lien Home → Mes Profils** : le lien est présent dans le composant `HeroSection` (lien « Télécharger mon CV ») mais n’est pas déclaré dans `index.json` ; le script `update-site-map` ne lit que les JSON. Ajout du lien dans **data/_Pages-Et-Lien.json** et dans **utils/siteMapGenerator.ts** (dans `detecterLiensInternes`, après la boucle sur les JSON) : `liens.push({ source: '/', destination: '/mes-profils', label: 'Mes Profils' })` pour que les prochaines exécutions du script conservent ce lien.
- **Liens footers** : le générateur crée actuellement un lien depuis **chaque** page vers chaque destination du footer (Plan du site, Metrics, Info), d’où le nombre élevé. Réduire à « un lien par destination footer » (ex. depuis "/" uniquement) serait un changement de règle métier (à valider avec le PO) ; non modifié pour l’instant.
- **Script** : `scripts/update-site-map.ts` appelle `detecterPages()` et `detecterLiensInternes()` puis `mettreAJourPlanJSON()`. Pour régénérer le plan : `npx tsx scripts/update-site-map.ts` (ou exécution lors du build). Après la modification dans `siteMapGenerator`, le lien "/" → "/mes-profils" sera inclus à chaque exécution.

#### Suppression redondance "Liens à parcourir" (URL + label)
##### Prompt
Pourquoi "plan du site" est-il nommé "/plan-du-site (Plan du site)". Cette redondance est inutile.

##### Résultat technique
- **AssistantScenario.tsx** : dans la liste « Liens à parcourir », affichage remplacé par les **titres des pages** (source et destination) au lieu de « URL → URL (label) ». Ex. « A propos du site → Plan du site » au lieu de « /a-propos → /plan-du-site (Plan du site) ». Utilisation de `plan.pages.find(p => p.url === …)?.titre ?? url` pour chaque lien.

#### Plan assistant : disposition identique à la page « Plan du site »
##### Prompt
La page "Plan du site" dessine le plan d'une certaine façon. S'inspirer du code pour dessiner le plan de façon identique : Home : boutons les uns sous les autres centrés ; Profils : boutons les uns à côté des autres sur la même ligne ; …

##### Résultat technique
- **Structure** : alignée sur **ListeDesPages** (app/plan-du-site + content-styles.css). Ligne 1 = Home (zone HomePage) : boutons empilés verticalement, centrés. Ligne 2 = Profils : boutons en ligne horizontale, centrés. Ligne 3 = grille 2 colonnes : Autres à gauche, Footer à droite, chaque colonne en disposition verticale centrée.
- **AssistantScenario.tsx** : `pagesParZone` en objet { HomePage, Profils, Autres, Footer } ; rendu par blocs `ligne1`+`zoneHomepage`, `ligne2`+`zoneProfils`, `ligne3` avec `colonneGauche`+`zoneAutres` et `colonneDroite`+`zoneFooter`. `renderPageButton` retourne uniquement le bouton/span (sans wrapper `<li>`).
- **AssistantScenario.module.css** : règles `.planSection .ligne1.zoneHomepage` (flex column, center), `.ligne2.zoneProfils` (flex row, center), `.ligne3` (grid 2 cols), `.colonneGauche`/`.colonneDroite` (flex column, center) ; media query 768px : ligne 2 en colonne, ligne 3 en une colonne.

#### Lien Home → Faisons connaissance (BleuClair depuis Home)
##### Prompt
Depuis la home, "Faisons connaissance" est accessible via "Discutons". Si Home est BleuFoncé, "Faisons connaissance" devrait être "BleuClair".

##### Résultat technique
- **Cause** : les liens vers `/faisons-connaissance` étaient exclus du plan (filtre pour éviter la multiplication des liens depuis toutes les pages). Le lien depuis Home (bouton « Discutons » du hero) n’était donc pas présent.
- **siteMapGenerator.ts** : après le filtre des liens vers `/faisons-connaissance`, ajout explicite du lien `{ source: '/', destination: '/faisons-connaissance', label: 'Discutons' }` pour que l’assistant affiche « Faisons connaissance » en BleuClair depuis Home.
- **data/_Pages-Et-Lien.json** : ajout du même lien pour l’état actuel sans relancer le script.

#### Liens Mes profils → profils (Produit logiciel, Opérations, etc.) manquants
##### Prompt
Une fois dans "Mes profils" je devrais pouvoir accéder à "Produit logiciel", "Opérations", "Transformation agile" et "Technologie". Or aucun n'est bleu ciel. Il doit y avoir un bogue dans l'algo qui liste les liens.

##### Résultat technique
- **Cause** : `detecterLiensInternes` ne traitait que les types `domaineDeCompetence` (bouton.action) dans les JSON. Le type **`profils`** (mes-profils.json : `profils[].route` vers /profil/cpo, etc.) n’était pas pris en compte, donc aucun lien mes-profils → profils n’était détecté.
- **siteMapGenerator.ts** : ajout dans la boucle sur `data.contenu` d’un cas `element.type === 'profils'` : pour chaque `element.profils[].route` interne, ajout d’un lien `source: pageSource`, `destination: profil.route`, `label: profil.titre`.
- **Script** : exécution de `npx tsx scripts/update-site-map.ts` ; le plan contient désormais les 4 liens /mes-profils → /profil/cpo, /profil/coo, /profil/agile, /profil/cto. Depuis « Mes profils », les 4 profils s’affichent en BleuClair.

#### Dériver les liens du plan depuis la liste des e2eID
##### Prompt
C'est pour ça qu'à mon avis il faut lister tous les e2eID. (Constat : l'algo qui liste les liens oubliait des cas → qualité douteuse ; en s'appuyant sur la liste des e2eID on évite les oublis.)

##### Résultat technique
- **Objectif** : utiliser la liste de tous les e2eID comme source de vérité pour les liens : chaque e2eID qui est un lien interne a une destination ; en dériver les liens du plan évite les oublis (Mes profils → profils, etc.).
- **e2eIdInventory.ts** : `E2eIdInventoryItem` étendu avec `destination?: string`. Lors de l’extraction JSON, si l’objet a `route` ou `action` interne, on remplit `destination` (même logique qu’`estLienInterne`).
- **siteMapGenerator.ts** : `PlanLien` étendu avec `e2eID?: string`. Nouvelle fonction **`getLiensFromE2eIdInventory()`** : appelle `generateE2eIdInventory()`, pour chaque item avec `destination` et `source === 'json'`, construit un `PlanLien` (source = page déduite du fichier, destination, label, e2eID). **`detecterLiensInternes()`** fusionne en premier les liens issus de l’inventaire (étape 0), puis le parsing par type (domaineDeCompetence, profils), footer, liens manuels ; déduplication inchangée. Ainsi tout élément JSON avec e2eID et destination est pris en compte sans ajouter un cas de parsing dédié.
- **Suite possible** : étendre l'inventaire React pour renseigner `destination` (href à côté de l'e2eid) et dériver aussi les liens depuis les composants ; garder l'inventaire comme source unique à long terme.

#### Affichage responsive assistant sur très grands écrans (em + clamp vw)
##### Prompt
Je trouve qu'en 19212 x 914 les proportions sont correctes. Toutefois sur un écran très grand (5120x2160) l'affichage est trop petit. La consigne : l'affichage du texte et la taille des boutons et des blocs n'est pas responsive, rend l'affichage de tout cela responsive en utilisant les unités de mesures responsive relatives à la taille de l'écran comme les em.

##### Résultat technique
- **AssistantScenario.module.css** : base de taille responsive ajustée pour les très grands écrans. `--assistant-base` passé de `clamp(1rem, 0.5rem + 0.4vw, 1.75rem)` à `clamp(1rem, 0.5rem + 0.5vw, 2.5rem)` : à 1920px la taille reste proche de 1rem ; à 5120px elle monte jusqu'à ~2.1rem (plafond 2.5rem). Toutes les tailles internes (texte, boutons, listes, padding, gaps, bordures) sont déjà en `em` par rapport à `.assistantScenario`, donc elles suivent cette base et s'agrandissent proportionnellement sur les très grands écrans sans modifier le rendu à 1920×914.

- **Suite possible** : étendre l'inventaire React pour renseigner `destination` (href à côté de l'e2eid) et dériver aussi les liens depuis les composants ; garder l'inventaire comme source unique à long terme.

### Hero – Réduction description en taille standard

#### Description hero trop grande en standard
##### Prompt
La description dans hero est trop grosse en standard !!!!!!!

##### Résultat technique
- Réduction de la taille de police de la description du hero (`.hero .description`) pour les écrans standards uniquement, en laissant les très grands écrans (2560px, 3840px) inchangés.
- **app/content-styles.css** : base et mobile **0.8125rem → 0.75rem** ; breakpoint 1920px **11px → 10px**. Breakpoints 2560px (0.9375rem) et 3840px (1rem) non modifiés.

#### Page Mes profils – noms et job titles plus gros en grande taille
##### Prompt
Page "Mes profils" - grand taille. Les nom des profil peuvent être un peu plus gros. Les job title doivent être plus grand (mais pas autant que le nom de profil).

##### Résultat technique
- Dans le bloc **@media (min-width: 1920px)** de **app/content-styles.css** : règles limitées à la page Mes profils (`.blocsProfils .profil`) : **.blocsProfils .profil h3** `font-size: 1.25rem` (au lieu de 1.125rem) ; **.blocsProfils .profil .jobTitle** `font-size: 0.9375rem` (au lieu de 0.8125rem). Les job titles restent plus petits que le nom de profil.

#### Icône télécharger fichier (FileDown) en em et proportionnelle
##### Prompt
L'icône "télécharger fichier" est minuscule. Puis : Mais enfin de 1900 à 5000 la proportion est énorme. L'icone ne doit pas passer de 14 à 20 pixel. Et puis il faut exprimer en em non ?

##### Résultat technique
- **app/content-styles.css** : sur **.profilLienCV svg**, ajout de **width: 1.15em; height: 1.15em;** pour que l’icône soit en **em** et suive la taille du texte du lien (et donc la base responsive). La proportion reste cohérente de 1900 à 5000px.
- **components/ProfilContainer.tsx** : icône **FileDown** en taille intrinsèque **size={24}** (rendu SVG) ; la taille affichée est pilotée par le CSS en em.

#### Domaines de compétence – citation, auteur, expériences lisibles (feuille centralisée)
##### Prompt
Page "Produit logiciel" (mais problème identiques sur les autres pages utilisant les même styles). Expérience et apprentissage : trop petit - illisibles. Idem pour l'auteur des citations. C'est quand même insupportable de devoir de lister tous les styles les uns après les autres alors que nous avons tout centralisé dans une seule feuille de style !!

##### Résultat technique
- **app/content-styles.css** : augmentation des tailles de base (une seule feuille, toutes les pages domaine de compétence concernées) :
  - **Citation** : `.domaineDeCompetence .domaineContenu` et `.domaineDeCompetence .domaineAuteur` **13px → 0.9375rem**.
  - **Auteur compétence** : `.domaineDeCompetence .competenceAuteur` **0.75rem → 0.9375rem**.
  - **Expériences et apprentissages** : `.domaineDeCompetence .experiencesTitre` **0.875rem → 1rem** ; `.domaineDeCompetence .experienceItem` **0.75rem → 0.9375rem**.
- Les media queries (769px, 1920px, 2560px, 3840px) conservent des tailles ≥ base ; pas de modification nécessaire.

#### Blocs Compétence – proportion hauteur / largeur (puis contrainte globale)
##### Prompt
La proportion "hauteur / largeur" des blocs "Compétence" n'est pas respectée. Puis : Ce n'est pas la hauteur qu'il faut augmenter mais la largeur qu'il faut réduire. Quand la largeur est supérieure à la hauteur (pas smartphone), le contenu doit être dessiné dans un bloc qui fait la même hauteur que la page (header et footer compris). Ainsi, si la proportion hauteur/largeur n'est pas identique à l'écran de conception, le rendu restera identique.

##### Résultat technique
- **Réduction de la largeur (pas hauteur)** : contrainte appliquée au conteneur global **.main**, pas aux cartes compétence.
- **app/content-styles.css** : (1) **@media (min-aspect-ratio: 1)** (largeur > hauteur = desktop, pas smartphone) : **.main** reçoit **max-width: min(100vw, calc(100vh * 16 / 9))**, **margin-left/right: auto**, **box-sizing: border-box**. La largeur du contenu ne dépasse pas 100vh × (16/9) → même proportion que l’écran de conception (16:9), rendu identique sur écrans ultralarges. (2) Suppression de **aspect-ratio: 4/3** sur **.competenceCard** (solution par contrainte globale, pas par carte). (3) **.competenceDescription** conserve **min-height: 0** et **overflow-y: auto** pour le défilement du contenu long.

### Build TypeScript – Correction erreur siteMapGenerator

#### Erreur TypeScript utils/siteMapGenerator.ts:345 (build Vercel)
##### Prompt
(Erreur affichée dans le terminal : Found 1 error in utils/siteMapGenerator.ts:345 ; npx tsc --noEmit échoue ; le build échouerait sur Vercel.)

##### Résultat technique
- **Cause** : le paramètre `contenu` de `extractLinksFromContenu` était typé par un type inline incompatible avec `ElementContenu[]` retourné par `readPageData` (notamment `Competence.bouton` peut être `null` et le type n'acceptait pas `e2eID`).
- **utils/siteMapGenerator.ts** : import de **ElementContenu** depuis `indexReader` ; signature de `extractLinksFromContenu` modifiée pour accepter **ElementContenu[] | undefined**. Pour **PlanLien.e2eID** : passage de `item.bouton?.e2eID` à **item.bouton?.e2eID ?? undefined** pour respecter le type `string | undefined` (pas `null`).
- **utils/indexReader.ts** : ajout de **e2eID?: string | null** sur le type **bouton** de l'interface **Competence** pour refléter le JSON et le reste du code (e2eIdDetector, etc.).
- **Vérification** : `npx tsc --noEmit` s'exécute sans erreur ; le script de publication peut passer l'étape de type-check.

### E2E – Fiabilité WebKit (parcours-complet-liens)

#### WebKit échoue vers 15s alors que Chromium/Firefox passent vers 34s
##### Prompt
Les 2 qui passent mettent 34s - Le premier n'est qu'à 15s (WebKit en échec, durée plus courte).

##### Résultat technique
- **Constat** : l'échec WebKit vers 15s indique une assertion (souvent `toBeVisible()`) qui échoue plus tôt ; le timeout par défaut des assertions est 5s, WebKit peut être plus lent à considérer un élément visible (paint, layout).
- **playwright.config.ts** : (1) **expect.timeout** global passé à **15s** (au lieu de 5s) pour toutes les assertions (ex. `toBeVisible()`). (2) Projet **webkit** : **actionTimeout: 15000**, **navigationTimeout: 40000** pour limiter les échecs précoces liés à la lenteur de WebKit.
- À vérifier : relancer les tests E2E (dont WebKit) ; si l'échec persiste, consulter le rapport HTML ou la trace pour identifier l'étape et l'élément en cause.

### Sprint et agent US – Syntaxe DOD

#### Première US du sprint 2026-01-28 écrite n'importe comment + contraintes agent US
##### Prompt
Je suis en train de lire le journal et que constate que le sprint "2026-01-28 - Assistant graphique construction scénario E2E" a sa première US écrite n'importe comment ! Merci de corriger ça à respectant la syntaxe. Va relire la DOD dans (3. Definition of Done (DOD)) pour ajouter des contraintes explicites dans les paramètres de l'agent "US".

##### Résultat technique
- **Sprint** `data/A propos de ce site/2. Sprints/2026-01-28 - Assistant graphique construction scénario E2E.md` : première US corrigée selon la DOD (Équipe) : (1) Titre passé de `## US :` à **`#### US-1.1 : Assistant graphique de construction de scénario E2E`** (H4, numérotation US-X.Y). (2) **« Je veux »** remplacé par **« Je souhaite »**. (3) Section **Critères d'acceptation** ajoutée avec la ligne `- **Critères d'acceptation** :` puis thèmes **CA1** à **CA5** (texte en gras) et critères (puces normales, indentés). Contenu A/B/C/D/E conservé et regroupé sous CA1–CA5. Contexte déplacé en fin d'US.
- **Agent US** `.cursor/agents/US.md` : nouvelle section **« Contraintes de syntaxe (DOD – Definition of Done) »** avec contraintes explicites issues de la DOD : fichier et emplacement (Sprint en cours dans `2. Sprints/`, format `YYYY-MM-DD - Sprint Goal.md`) ; format de l'US (`#### US-X.Y : Titre`, sections En tant que / Je souhaite / Afin de / Critères d'acceptation, « Je souhaite » jamais « Je veux ») ; structure des Critères d'acceptation (ligne `- **Critères d'acceptation** :`, thèmes en `- **…**`, critères en `- ` sans gras) ; comportement (focus Sprint en cours, alerter en cas de dérive). Référence au fichier DOD : `A propos de ce site/3. Definition of Done (DOD)/DOD - Équipe.md`.

### Renommage des fichiers agents (.cursor/agents)

#### Renommage avec préfixe numérique
##### Prompt
Renommer les fichiers du dossier `.cursor/agents` et s'assurer qu'il n'y ait pas d'effet de bord sur le comportement des agents : lead-dev.md → 1. Lead-dev.md, US.md → 2. US.md, BDD.md → 3. BDD.md, TDD-back-end.md → 4. TDD-back-end.md, TDD-front-end.md → 5. TDD-front-end.md.

##### Résultat technique
- Fichiers renommés dans `.cursor/agents/` : `1. Lead-dev.md`, `2. US.md`, `3. BDD.md`, `4. TDD-back-end.md`, `5. TDD-front-end.md`. Contenu et frontmatter (champ `name`) inchangés pour préserver les @mentions (@lead-dev, @US, @BDD, @TDD-back-end, @TDD-front-end).
- `.cursor/US-EN-COURS.md` : liste des agents mise à jour avec les nouveaux noms de fichiers et précision que la @ mention correspond au champ `name` du frontmatter.
- Aucun effet de bord : le site lit le dossier `.cursor/agents` via `readChapitreByPath` (tous les .md sont listés dynamiquement) ; les références entre agents utilisent les @mentions (name), pas les noms de fichiers.

### Mise à jour des consignes des agents (plan d'action arbitré)

#### Renforcement « déjà figurant » et ajouts explicites (Revue, BDD, TDD-back-end, Boy Scout)
##### Prompt
Mettre à jour les consignes des agents avec le plan d'action : (1–2) ajouter ce qu'il faut où il y a un risque d'implicite ; (4) ajouter Revue, Agent BDD (refactoriser scénarios non conformes à l'US), Agent TDD Backend (discuter implémentation avant de coder), Boy Scout (toujours appliquer ; lead-dev veille) ; journal géré par lead-dev en fin d'US.

##### Résultat technique
- **Lead-dev** (`1. Lead-dev.md`) : Processus (reformulation et validation explicite avant étape suivante pour le fonctionnel) ; à l'étape BDD exigence que les BDD soient validés par l'utilisateur/PO ; à TDD-back-end et TDD-front-end exigence de couverture minimale (ex. 90 %) ; avant `done` s'assurer que build et tests peuvent passer. Section « Tu fais » : Vérifications (linters, build si modifs importantes, tests pertinents) ; Revue (DoD du profil, Clean Code, cohérence BDD ; corriger le mineur, retourner le non conforme) ; Stratégie Boy Scout (faire nettoyer en passant si code ne respecte pas les consignes ; lead-dev veille) ; journal géré par lead-dev en fin d'US.
- **BDD** (`3. BDD.md`) : Syntaxe Gherkin — `# language: fr` en première ligne des .feature en français ; scénarios conformes à l'US en cours et cohérents avec les existants ; Refactorisation — identifier et refactoriser les scénarios dans le code qui ne sont plus conformes à l'US en cours.
- **TDD-back-end** (`4. TDD-back-end.md`) : Avant de coder — discuter avec l'utilisateur des détails d'implémentation (design, structure, cas limites) avant de se lancer ; TDD — progression du simple au complexe (itérations visibles), cas de robustesse (fichiers absents/invalides, JSON malformé, chemins inattendus).
- **TDD-front-end** (`5. TDD-front-end.md`) : Avant d'implémenter — pour une nouvelle page ou un nouveau type de contenu, décrire brièvement la mise en page et la faire valider par l'utilisateur avant de coder.

### Clarification GO NEXT vs US VALIDÉE (consignes agents)

#### Mise à jour des consignes pour distinguer avancer d'une étape et fin du tunnel
##### Prompt
Non ! "US VALIDÉE" veut dire qu'on est en fin du tunnel KanBan ! Que FrontEnd est terminé et que le leaddev a fait la revue de code. Là je dois dire "GO NEXT" pour passer à l'étape suivante. Met à jour les consignes des agents pour clarifier ce point.

##### Résultat technique
- **Lead-dev** (`1. Lead-dev.md`) : ajout d'un encadré **« En résumé — Ne pas confondre »** : **GO NEXT** = passer à l'étape suivante (US → BDD → TDD-back-end → TDD-front-end) ; **US VALIDÉE** = fin du tunnel uniquement (front-end livré + revue Lead-dev faite → étape = `done`). Ne jamais utiliser US VALIDÉE pour simplement passer à l'étape suivante.
- **US** (`2. US.md`) : section Commande — distinction explicite : **GO NEXT** = lead-dev avance d'une étape ; **US VALIDÉE** = lead-dev acte la fin du tunnel (étape = `done`). Ne pas utiliser US VALIDÉE pour avancer d'une étape à l'autre.
- **US en cours** (`data/A propos de ce site/Sprints/US en cours.md`) : ligne **Commandes** ajoutée : pour avancer d'une étape à l'autre, dire **GO NEXT** ; pour acter la fin du tunnel, dire **US VALIDÉE**.
- **Règle Lead Dev** (`.cursor/rules/lead-dev-principal.mdc`) : nouvelle sous-section **Commandes tunnel Kanban (GO NEXT vs US VALIDÉE)** : GO NEXT = passer à l'étape suivante ; US VALIDÉE = fin du tunnel uniquement.

#### Correction BDD US-1.4 et GO NEXT
##### Prompt
Corrige BDD - GO NEXT

##### Résultat technique
- **BDD** (`tests/bdd/a-propos-tableau-de-bord.feature`) : ajout de `# language: fr` en première ligne ; ajout de 5 scénarios pour **US-1.4** (Path avec dossiers et accordéon à la racine) : (1) à la racine d'un Path, fichiers MD en H1 et dossiers en H1 avec accordéon ; (2) clic sur un dossier déplie/replie la section ; (3) dans un dossier déplié, fichiers MD en H2 et contenu en H3+ ; (4) accordéon utilisable au clavier ; (5) état déplié/replié indiqué (aria-expanded ou équivalent).
- **US en cours** : étape passée de `BDD` à **`TDD-back-end`**. Prochaine invocation : **@TDD-back-end** pour implémenter la logique métier (utils) de l'US-1.4.

#### Consignes Lead-dev : build et suite de tests uniquement à « US VALIDÉE »
##### Prompt
Inutile de lancer un build tant que je n'ai pas donné mon avis sur l'US. Il y a des ajustements à faire suite au feedback. C'est au moment où je dis "US VALIDEE" que c'est intéressant de lancer la suite de test. Actuellement les fichiers d'US ne sont pas listés. Mettre à jour les consignes du leaddev en conséquence.

##### Résultat technique
- **Lead-dev** (`1. Lead-dev.md`) : nouvelle section **Build et suite de tests — quand les lancer** : ne pas lancer le build ni la suite de tests tant que l'utilisateur n'a pas donné son avis sur l'US (ajustements / feedback possibles) ; c'est au moment où l'utilisateur dit **US VALIDÉE** qu'il est pertinent de lancer la suite de tests et le build. Section **Tu fais / Vérifications** : ne pas exiger ni lancer le build / suite complète avant **US VALIDÉE** ; quand l'utilisateur dit **US VALIDÉE**, lancer alors build et suite de tests.
- **Règle Lead Dev** (`.cursor/rules/lead-dev-principal.mdc`) : sous-section **Build et suite de tests — quand les lancer** (ne pas lancer avant avis utilisateur ; lancer à **US VALIDÉE**) ; **Build** et **Tests** précisés en conséquence (tests pertinents pendant le tunnel, suite complète et build à **US VALIDÉE**).
- **Note** : le feedback « les fichiers d'US ne sont pas listés » concerne l'US-1.4 (affichage Path) ; les ajustements sont à faire par l'équipe avant que l'utilisateur dise **US VALIDÉE**.
