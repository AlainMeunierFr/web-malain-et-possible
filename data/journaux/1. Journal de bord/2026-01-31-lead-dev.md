### Design tokens – fin migration et media queries

#### GO – poursuite migration tokens et vérification layout
##### Prompt
go !
##### Résultat technique
- **Migration des sélecteurs canoniques vers les tokens** : Dans `app/content-styles.css`, remplacement des valeurs en dur par des tokens : couleurs (#ffffff, #000000, rgba(9,23,71,1), #dc2626, #f0f0f0, white) → var(--Blanc), var(--Noir), var(--h2-color)/var(--p-color)/var(--a-color), var(--couleur-alerte), var(--CouleurClaire). Bordure profil : var(--Noir-10) (token ajouté dans globals.css). Boutons : color/font-size/font-weight → var(--Blanc), var(--b-font-size), var(--b-font-weight). Video h2, videoDetournement (titreVideoDetournee, titreVideoOriginale, pourLeCompteDe, ui-sectionTitle, ui-popupContent), temoignage.photo, footer .version/.icone, lien markdown hover, competence.auteur (bloc dupliqué en fin de fichier) → tokens. experienceEtApprentissage (base) → var(--n-font-size), var(--n-font-weight), var(--n-color), var(--n-line-height). groupeDeBoutons.texte → --l1 + var(--moyenne)/var(--grande) en responsive.
- **globals.css** : Ajout de --Noir-10 (rgba(23,23,23,0.1)), --couleur-alerte (#dc2626), --couleur-alerte-fond (#ffffff).
- **Media queries (1920px, 2560px, 3840px)** : Tailles de police en dur remplacées par var(--normale), var(--petite), var(--moyenne), var(--grande), var(--enorme), var(--n-font-size) pour cohérence avec le système de tokens ; correction .hero.description en 2560px (0.6875rem → var(--petite)).
- **Layout containers** : Aucun token dédié ajouté ; .main, .hero, .blocsProfils, .profil utilisent déjà padding/max-width conformes au brief.
- **Linters** : Aucune erreur sur content-styles.css et globals.css.

#### Hero : même hauteur pour hero.gauche et hero.droite
##### Prompt
hero.gauche et hero.droite doivent être de la même hauteur. Comme hero.droite contient la vidéo dont les proportions sont contraintes, la hauteur est calculable.

##### Résultat technique
- **content-styles.css** : En desktop (min-width: 769px), hauteur hero dérivée de la vidéo : largeur vidéo = LargeurPage/2, hauteur = (LargeurPage/2)×(9/16) = LargeurPage×9/32. Conteneur grille `aspect-ratio: 32/9`. hero.gauche et hero.droite même hauteur ; vidéo remplit hero.droite (`.video` / `.videoWrapper` height 100 %, padding-bottom 0). `.hero .ui-heroGauche` s’étire à la même hauteur (`align-items: stretch`). La vidéo dans hero.droite remplit la colonne : `.hero .ui-heroDroite .video` en `height: 100%`, `.videoWrapper` en `height: 100%` et `padding-bottom: 0` dans le media query desktop.

#### Alignement hero avec la production (padding et tailles de police)
##### Prompt
Poursuite alignement local sur la prod : padding indésirable sur h1/h2/p du hero, tailles de police écrasées en 1440px/2560px/3840px.
##### Résultat technique
- **content-styles.css** : `.hero.titre` : ajout `margin-top: 0`, `padding: 0`, `background: none` pour annuler le style boîte de `.titre`. `.hero.sousTitre` et `.hero.description` : ajout `padding: 0`. Dans les media queries 1440px, 2560px et 3840px : `.hero.titre` avec `padding: 0` ; `.hero.sousTitre` forcé à `14px` (au lieu de `var(--petite)`) ; `.hero.description` à `var(--normale)` et `padding: 0` (au lieu de `var(--petite)`). Objectif : même rendu que la prod (pas de padding sur les textes hero, sous-titre 14px, description 1rem). Hauteur hero devrait diminuer grâce à la suppression du padding sur les blocs texte.

#### GO – ordre DOM VideoDetournement = CANONICAL_SPEC_ORDER
##### Prompt
GO dont le 8. où tu dois réorganiser la rendu du composant detournementVideo en fonction de l'ordre CANONICAL_SPEC_ORDER
##### Résultat technique
- **VideoDetournement.tsx** : Ordre DOM aligné sur CANONICAL_SPEC_ORDER : titre (h2) → pitch → date → titreVideoDetournee (h3) → videoDetournee (--v) → droitsAuteur (--n) → linkedin (--n) → titreVideoOriginale (h3) → videoOriginale (--v). Suppression du wrapper `ui-videosContainer` ; chaque bloc vidéo est un sibling. Suppression de l’import `VideoDetournement.module.css` (fichier supprimé). `ui-videoActions` rendu systématiquement (entre videoDetournee et titreVideoOriginale) pour respecter l’ordre spec.
- **content-styles.css** : `.videoDetournement .ui-card` en grille 2 colonnes (`display: grid`, `grid-template-columns: 1fr 1fr`) ; titre, pitch, date, ui-videoActions en `grid-column: 1 / -1` ; titreVideoDetournee et videoDetournee en colonne 1 ; titreVideoOriginale et videoOriginale en colonne 2. Règles `.ui-videosContainer` supprimées ; `.detournementVideo.videoDetournee` et `.videoOriginale` en `width: 100%`, `min-width: 0`.
- **Tests** : 13 tests VideoDetournement passent.

#### GO – plan spec répétiteurs et mode lecture
##### Prompt
GO (plan d’action en 8 points : spec répétiteurs, reader listeDesExperiencesEtApprentissage, mode lecture --m en gris, sommaire premier, etc.)
##### Résultat technique
- **canonicalSpec.ts** : REPEATER_SPEC (listeDeDetournementsVideo --m, listeDeTemoignages --h2, listeDeProfils --m, listeDesExperiencesEtApprentissage --h4, groupeDeBoutons --m, listeDesPages --h1) avec libellés. getRepeaterSpec(type). typeHierarchiqueToDisplay('--m') → 'm' (affiché en gris en mode lecture).
- **indexReader.ts** : Type 'listeDesExperiencesEtApprentissage' et interface ElementListeDesExperiencesEtApprentissage (experiences: ExperienceEtApprentissage[]). Ajout à TypeElementContenu et ElementContenu.
- **ModeLectureRenderer.tsx** : Import getRepeaterSpec. Pour les types dans REPEATER_SPEC : affichage d’une ligne (libellé + type hiérarchique) puis enfants. getChildren(domaineDeCompetence) : si experiences présent, retourne [...items, { type: 'listeDesExperiencesEtApprentissage', experiences }]. getChildren(listeDesExperiencesEtApprentissage) : retourne element.experiences. FALLBACK_SEMANTIC réduit à video: 'p'.
- **mode-lecture.css** : Style pour data-semantic="m" (padding-left 80px, opacity 0.65, couleur #6b7280).
- **mode-lecture/page.tsx** : ORDRE_JSON avec plan-du-site.json en premier (sommaire).
- **PageContentRenderer.tsx** : case 'listeDesExperiencesEtApprentissage' → null (conteneur logique mode lecture uniquement).
- **tests/unit/canonicalSpec.test.ts** : Tests REPEATER_SPEC, getRepeaterSpec, typeHierarchiqueToDisplay('--m') === 'm'. canonicalSpec, indexReader, PageContentRenderer : 30 tests passent. DomaineDeCompetences : 1 test en échec (attente /\[2020-2023\]/ vs rendu sans crochets), préexistant.

#### GO – hiérarchie containers (CONTAINER_SPEC)
##### Prompt
GO
##### Résultat technique
- **constants/canonicalSpec.ts** : Ajout de CONTAINER_SPEC (plan A–G) : pour chaque type (contenuDeLaPage, header, titreDePage, hero, listeDeProfils, profil, listeDeTemoignages, temoignage, domaineDeCompetence, competence, listeDeDetournementsVideo, detournementVideo, listeDesExperiencesEtApprentissage, experienceEtApprentissage, groupeDeBoutons, listeDesPages, video, titre, texteLarge, callToAction, bouton) : containerParent + layout (main, header, columns, rows, column, block, grid). Types ContainerSpecEntry et ContainerLayout. getContainerSpec(type).
- **components/ModeLectureRenderer.tsx** : resolveContainerPere(containerType, elementType) : si containerType null (racine), affiche getContainerSpec(elementType)?.containerParent (ex. contenuDeLaPage) dans la colonne « Container père ». Les blocs de premier niveau affichent ainsi la hiérarchie issue de la spec.
- **tests/unit/canonicalSpec.test.ts** : Tests CONTAINER_SPEC et getContainerSpec (contenuDeLaPage racine, profil → listeDeProfils → contenuDeLaPage, detournementVideo sous listeDeDetournementsVideo, type inconnu → undefined). 14 tests passent.

#### GO – correction et refactorisation : containers .cont dans CANONICAL_SPEC_ORDER
##### Prompt
GO pour correction et refactorisation
##### Résultat technique
- **constants/canonicalSpec.ts** : Containers intégrés comme types à part entière dans CANONICAL_SPEC_ORDER avec suffixe explicite `.cont` et type hiérarchique `--c`. Suppression de CONTAINER_SPEC, ContainerSpecEntry, ContainerLayout, getContainerSpec. Ordre unifié : contenuDeLaPage.cont (--c), titreDePage.texte, hero.cont, hero.cont.gauche, hero.titre…, hero.cont.droite, video.urlYouTube, listeDeProfils.cont, profil.cont, profil.titre…, puis témoignages, domaineDeCompetence.cont, competence.cont, listeDesExperiencesEtApprentissage.cont, experienceEtApprentissage.cont, groupeDeBoutons.cont, listeDeDetournementsVideo.cont, detournementVideo.cont, listeDesPages.cont. typeHierarchiqueToDisplay('--c') → 'c'. getPageContainerSpecEntries(), isContainerType(). SPEC_PREFIX_BY_TYPE étendu aux types répétiteurs (listeDeProfils, listeDeTemoignages, etc.).
- **components/ModeLectureRenderer.tsx** : Lignes containers (--c) émises en mode lecture : pour chaque entrée --c, affichage du nom canonique (ex. hero.cont.gauche) avec data-semantic="c". Container courant dérivé du spec (lastContainerCourant). PageContainerRows en tête de chaque page (contenuDeLaPage.cont). resolveContainerPere(containerType) : racine → 'contenuDeLaPage.cont'. CONTAINER_FOR_CHILDREN pour lier enfants au bon container (hero → hero.cont.gauche, listeDeProfils → listeDeProfils.cont, etc.). Répétiteurs : émission des .cont du type puis libellé puis enfants.
- **app/mode-lecture/mode-lecture.css** : Styles pour data-semantic="c" et .mode-lecture-cont (font-weight 600, couleur #0d5c2e).
- **tests/unit/canonicalSpec.test.ts** : CONTAINER_SPEC/getContainerSpec remplacés par tests CANONICAL_SPEC_ORDER (contenuDeLaPage.cont, hero.cont/hero.cont.gauche/hero.cont.droite), getPageContainerSpecEntries, isContainerType, typeHierarchiqueToDisplay('--c'). getSpecEntriesForType('detournementVideo') : première entrée detournementVideo.cont (--c). 15 tests passent.

#### Correction test indexReader.indexJson après refacto hero (ensavoirplus)
##### Prompt
Suite refacto hero : le chemin doit être dans le JSON (ensavoirplus), pas implicite dans le render ; index.json sans profils, avec ensavoirplus ; CANONICAL_SPEC_ORDER avec hero.ensavoirplus ; tests à jour.
##### Résultat technique
- **tests/unit/indexReader.indexJson.test.ts** : Test « devrait contenir un élément hero avec titre, sousTitre, description, boutonPrincipal, profils » remplacé par « … boutonPrincipal, ensavoirplus » ; assertion `Array.isArray(hero!.profils)` remplacée par vérification de `ensavoirplus` (typeof string, length > 0). 4 suites (heroTypes, indexReader, HeroSection, indexReader.indexJson) passent (34 tests).

#### Renommage hero boutonPrincipal → callToAction
##### Prompt
Renommer "boutonPrincipal" et 'hero.boutonPrincipal.action' "callToAction".
##### Résultat technique
- **data/index.json** : `boutonPrincipal` → `callToAction` (objet { texte, action }).
- **utils/indexReader.ts** : Interface ElementHero, propriété `boutonPrincipal` → `callToAction`.
- **constants/canonicalSpec.ts** : entrée `hero.boutonPrincipal.action` → `hero.callToAction` (--lk).
- **components/HeroSection.tsx** : `element.boutonPrincipal` → `element.callToAction`, classe CSS `boutonPrincipal` → `callToAction`.
- **components/ModeLectureRenderer.tsx** : cas `hero.boutonPrincipal.action` → `hero.callToAction`, résolution texte/action via `hero.callToAction.texte` et `hero.callToAction.action`.
- **app/content-styles.css** : `.hero.boutonPrincipal` → `.hero.callToAction`, commentaire idem ; suppression sélecteur `.ui-boutonPrincipalContainer` (conteneur unifié `.ui-heroCtas`).
- **Tests** : indexReader.indexJson, indexReader, HeroSection, heroTypes, PageContentRenderer mis à jour (callToAction). **BDD** : hero-section-recherche-emploi.feature (table et étapes boutonPrincipal → callToAction). **Docs** : HIERARCHIE-SITE-ASCII.md, Refacto.txt. **Script** : test-hero-rendering.ts. 6 suites unitaires passent (61 tests).

#### Containers implicites [nomCanonique].cont pour toutes les propriétés
##### Prompt
Ajouter un container implicitement à toutes les propriétés (son nom sera de la forme "[nom canonique].cont").
##### Résultat technique
- **constants/canonicalSpec.ts** : Liste de base `CANONICAL_SPEC_ORDER_BASE` (ordre logique sans .cont implicites). Fonction `expandWithImplicitContainers()` : pour chaque entrée dont `typeHierarchique !== '--c'`, insertion d’une entrée `[nomCanonique].cont` (--c) juste avant, avec `containerParent` inchangé et `containerLayout = [nom].cont` ; l’entrée propriété a désormais `containerParent = [nom].cont`. `CANONICAL_SPEC_ORDER` exporté = résultat de l’expansion. getPageContainerSpecEntries, getSpecEntriesForType, getContainerParentMap utilisent donc la liste déjà expandue.
- **tests/unit/canonicalSpec.test.ts** : Assertions mises à jour (titreDePage.texte.cont puis titreDePage.texte, hero.titre.cont/hero.sousTitre.cont dans la liste hero, listeDesPages.page.cont et containerParent listeDesPages.page.cont pour listeDesPages.page).
- **HIERARCHIE-SITE-ASCII.md** : Arbre mis à jour avec un dossier `[nom].cont/` par propriété et une ligne pour la propriété ; légende précisant les containers implicites.
